import{BasicTooltip as e,useTooltip as r}from"@nivo/tooltip";import{jsx as a,jsxs as n}from"react/jsx-runtime";import{useMemo as i,useCallback as o,createElement as t,Fragment as l}from"react";import{degreesToRadians as d,useValueFormatter as s,Container as u,useDimensions as c,clampArc as g,bindDefs as v,SvgWrapper as f,ResponsiveWrapper as p}from"@nivo/core";import{ArcsLayer as b,ArcLabelsLayer as m}from"@nivo/arcs";import{BoxLegendSvg as h}from"@nivo/legends";import{PolarGrid as A,RadialAxis as R,CircularAxis as x}from"@nivo/polar-axes";import{scaleLinear as M,scaleBand as y}from"d3-scale";import{arc as C}from"d3-shape";import{useOrdinalColorScale as k}from"@nivo/colors";import{castLinearScale as I,castBandScale as G,getScaleTicks as S}from"@nivo/scales";function W(){return W=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},W.apply(this,arguments)}var L={maxValue:"auto",layers:["grid","tracks","bars","labels","legends"],startAngle:0,endAngle:270,innerRadius:.3,padding:.2,padAngle:0,cornerRadius:0,enableTracks:!0,tracksColor:"rgba(0, 0, 0, .15)",enableRadialGrid:!0,enableCircularGrid:!0,radialAxisStart:{},radialAxisEnd:null,circularAxisInner:null,circularAxisOuter:{},colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableLabels:!1,label:"formattedValue",labelsSkipAngle:10,labelsRadiusOffset:.5,labelsTextColor:{theme:"labels.text.fill"},isInteractive:!0,tooltip:function(r){var i=r.bar;return a(e,{enableChip:!0,id:n("span",{children:[i.category," - ",i.groupId]}),value:i.formattedValue,color:i.color})},legends:[],defs:[],fill:[],animate:!0,motionConfig:"gentle",transitionMode:"centerRadius",renderWrapper:!0},O=W({},L),V=function(e){var n=e.center,i=e.bars,l=e.borderWidth,d=e.borderColor,s=e.arcGenerator,u=e.isInteractive,c=e.tooltip,g=e.onClick,v=e.onMouseEnter,f=e.onMouseMove,p=e.onMouseLeave,m=e.transitionMode,h=r(),A=h.showTooltipFromEvent,R=h.hideTooltip,x=o((function(e,r){null==g||g(e,r)}),[g]),M=o((function(e,r){A(t(c,{bar:e}),r),null==v||v(e,r)}),[A,c,v]),y=o((function(e,r){A(t(c,{bar:e}),r),null==f||f(e,r)}),[A,c,f]),C=o((function(e,r){R(),null==p||p(e,r)}),[R,p]);return a(b,{center:n,data:i,arcGenerator:s,borderWidth:l,borderColor:d,transitionMode:m,onClick:u?x:void 0,onMouseEnter:u?M:void 0,onMouseMove:u?y:void 0,onMouseLeave:u?C:void 0})},E=function(e){var r=e.center,n=e.tracks,i=e.arcGenerator,o=e.transitionMode;return a(b,{center:r,data:n,arcGenerator:i,borderWidth:0,borderColor:"none",transitionMode:o})},w=["isInteractive","animate","motionConfig","theme","renderWrapper"],T=function(e){var r=e.data,o=e.maxValue,u=void 0===o?O.maxValue:o,p=e.valueFormat,b=e.startAngle,w=void 0===b?O.startAngle:b,T=e.endAngle,j=void 0===T?O.endAngle:T,B=e.innerRadius,D=void 0===B?O.innerRadius:B,F=e.padding,H=void 0===F?O.padding:F,P=e.padAngle,K=void 0===P?O.padAngle:P,q=e.cornerRadius,z=void 0===q?O.cornerRadius:q,J=e.width,N=e.height,Q=e.margin,U=e.layers,X=void 0===U?O.layers:U,Y=e.enableTracks,Z=void 0===Y?O.enableTracks:Y,$=e.tracksColor,_=void 0===$?O.tracksColor:$,ee=e.enableRadialGrid,re=void 0===ee?O.enableRadialGrid:ee,ae=e.enableCircularGrid,ne=void 0===ae?O.enableCircularGrid:ae,ie=e.radialAxisStart,oe=void 0===ie?O.radialAxisStart:ie,te=e.radialAxisEnd,le=void 0===te?O.radialAxisEnd:te,de=e.circularAxisInner,se=void 0===de?O.circularAxisInner:de,ue=e.circularAxisOuter,ce=void 0===ue?O.circularAxisOuter:ue,ge=e.colors,ve=void 0===ge?O.colors:ge,fe=e.defs,pe=void 0===fe?O.defs:fe,be=e.fill,me=void 0===be?O.fill:be,he=e.borderWidth,Ae=void 0===he?O.borderWidth:he,Re=e.borderColor,xe=void 0===Re?O.borderColor:Re,Me=e.enableLabels,ye=void 0===Me?O.enableLabels:Me,Ce=e.label,ke=void 0===Ce?O.label:Ce,Ie=e.labelsSkipAngle,Ge=void 0===Ie?O.labelsSkipAngle:Ie,Se=e.labelsRadiusOffset,We=void 0===Se?O.labelsRadiusOffset:Se,Le=e.labelsTextColor,Oe=void 0===Le?O.labelsTextColor:Le,Ve=e.isInteractive,Ee=void 0===Ve?O.isInteractive:Ve,we=e.tooltip,Te=void 0===we?O.tooltip:we,je=e.onClick,Be=e.onMouseEnter,De=e.onMouseMove,Fe=e.onMouseLeave,He=e.transitionMode,Pe=void 0===He?O.transitionMode:He,Ke=e.legends,qe=void 0===Ke?O.legends:Ke,ze=e.role,Je=e.ariaLabel,Ne=e.ariaLabelledBy,Qe=e.ariaDescribedBy,Ue=c(J,N,Q),Xe=Ue.margin,Ye=Ue.innerWidth,Ze=Ue.innerHeight,$e=Ue.outerWidth,_e=Ue.outerHeight,er=g(w,j),rr=er[0],ar=er[1],nr=function(e){var r=e.data,a=e.maxValue,n=void 0===a?O.maxValue:a,o=e.valueFormat,t=e.startAngle,l=void 0===t?L.startAngle:t,u=e.endAngle,c=void 0===u?L.endAngle:u,g=e.innerRadiusRatio,v=void 0===g?L.innerRadius:g,f=e.padding,p=void 0===f?L.padding:f,b=e.padAngle,m=void 0===b?L.padAngle:b,h=e.cornerRadius,A=void 0===h?L.cornerRadius:h,R=e.width,x=e.height,W=e.colors,V=void 0===W?L.colors:W,E=e.tracksColor,w=void 0===E?L.tracksColor:E,T=i((function(){return[R/2,x/2]}),[R,x]),j=Math.min.apply(Math,T),B=j*Math.min(v,1),D=k(V,"category"),F=i((function(){var e={serieIds:[],categories:[],groups:[],maxValue:0};return r.forEach((function(r){e.serieIds.push(r.id);var a=0;r.data.forEach((function(r){e.categories.includes(r.x)||e.categories.push(r.x),a+=r.y})),e.groups.push({id:r.id,total:a,data:r.data})})),e.maxValue="auto"===n?Math.max.apply(Math,e.groups.map((function(e){return e.total}))):n,e}),[r,n]),H=F.serieIds,P=F.categories,K=F.groups,q=F.maxValue,z=i((function(){return I(M().domain([0,q]).range([l,c]))}),[q,l,c]),J=i((function(){return G(y().domain(H).range([B,j]).padding(p))}),[H,j,B,p]),N=i((function(){return C().startAngle((function(e){return e.startAngle})).endAngle((function(e){return e.endAngle})).innerRadius((function(e){return e.innerRadius})).outerRadius((function(e){return e.outerRadius})).cornerRadius(A).padAngle(d(m))}),[A,m]),Q=s(o),U=i((function(){var e=[];return K.forEach((function(r){var a=0,n=J(r.id),i=n+J.bandwidth();r.data.forEach((function(o){var t=a+o.y,l={id:r.id+"."+o.x,data:o,groupId:r.id,category:o.x,value:o.y,formattedValue:Q(o.y),color:"",stackedValue:t,arc:{startAngle:d(z(a)),endAngle:d(z(t)),innerRadius:n,outerRadius:i}};l.color=D(l),a+=o.y,e.push(l)}))})),e}),[K,J,z,D,Q]),X=d(l),Y=d(c),Z=i((function(){return S(J).map((function(e){var r=J(e);return{id:e,color:w,arc:{startAngle:X,endAngle:Y,innerRadius:r,outerRadius:r+J.bandwidth()}}}))}),[J,X,Y,w]),$=i((function(){return P.map((function(e){var r=U.find((function(r){return r.category===e})),a=r?r.color:void 0;return{id:e,label:e,color:a}}))}),[P,U]),_=i((function(){return{center:T,outerRadius:j,innerRadius:B,bars:U,arcGenerator:N,radiusScale:J,valueScale:z}}),[T,j,B,U,N,J,z]);return{center:T,outerRadius:j,innerRadius:B,bars:U,arcGenerator:N,radiusScale:J,valueScale:z,tracks:Z,legendData:$,customLayerProps:_}}({data:r,maxValue:u,valueFormat:p,startAngle:rr,endAngle:ar,innerRadiusRatio:D,padding:H,padAngle:K,cornerRadius:z,width:Ye,height:Ze,colors:ve,tracksColor:_}),ir=nr.center,or=nr.innerRadius,tr=nr.outerRadius,lr=nr.bars,dr=nr.arcGenerator,sr=nr.radiusScale,ur=nr.valueScale,cr=nr.tracks,gr=nr.legendData,vr=nr.customLayerProps,fr={grid:null,tracks:null,bars:null,labels:null,legends:null};X.includes("grid")&&(fr.grid=n(l,{children:[a(A,{center:ir,enableRadialGrid:re,enableCircularGrid:ne,angleScale:ur,radiusScale:sr,startAngle:rr,endAngle:ar}),oe&&a(R,W({type:"start",center:ir,angle:Math.min(rr,ar),scale:sr},oe)),le&&a(R,W({type:"end",center:ir,angle:Math.max(rr,ar),scale:sr},le)),se&&a(x,W({type:"inner",center:ir,radius:or,startAngle:rr,endAngle:ar,scale:ur},se)),ce&&a(x,W({type:"outer",center:ir,radius:tr,startAngle:rr,endAngle:ar,scale:ur},ce))]},"grid")),X.includes("tracks")&&Z&&(fr.tracks=a(E,{center:ir,tracks:cr,arcGenerator:dr,transitionMode:Pe},"tracks")),X.includes("bars")&&(fr.bars=a(V,{center:ir,bars:lr,borderWidth:Ae,borderColor:xe,arcGenerator:dr,isInteractive:Ee,tooltip:Te,onClick:je,onMouseEnter:Be,onMouseMove:De,onMouseLeave:Fe,transitionMode:Pe},"bars")),X.includes("labels")&&ye&&(fr.labels=a(m,{center:ir,data:lr,label:ke,radiusOffset:We,skipAngle:Ge,textColor:Oe,transitionMode:Pe},"labels")),X.includes("legends")&&qe.length>0&&(fr.legends=a(l,{children:qe.map((function(e,r){return a(h,W({},e,{containerWidth:Ye,containerHeight:Ze,data:gr}),r)}))},"legends"));var pr=v(pe,lr,me,{dataKey:"data",targetKey:"fill"});return a(f,{width:$e,height:_e,margin:Xe,defs:pr,role:ze,ariaLabel:Je,ariaLabelledBy:Ne,ariaDescribedBy:Qe,children:X.map((function(e,r){var n;return"function"==typeof e?a(l,{children:t(e,vr)},r):null!=(n=null==fr?void 0:fr[e])?n:null}))})},j=function(e){var r=e.isInteractive,n=void 0===r?O.isInteractive:r,i=e.animate,o=void 0===i?O.animate:i,t=e.motionConfig,l=void 0===t?O.motionConfig:t,d=e.theme,s=e.renderWrapper,c=function(e,r){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(i[a]=e[a]);return i}(e,w);return a(u,{animate:o,isInteractive:n,motionConfig:l,renderWrapper:s,theme:d,children:a(T,W({isInteractive:n},c))})},B=function(e){return a(p,{children:function(r){var n=r.width,i=r.height;return a(j,W({width:n,height:i},e))}})};export{j as RadialBar,B as ResponsiveRadialBar,L as commonDefaultProps,O as svgDefaultProps};
//# sourceMappingURL=nivo-radial-bar.es.js.map
