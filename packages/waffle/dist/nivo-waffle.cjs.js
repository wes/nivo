"use strict";var e=require("react"),o=require("@nivo/core"),t=require("@nivo/legends"),r=require("@react-spring/web"),i=require("react/jsx-runtime"),n=require("@nivo/tooltip"),a=require("d3-shape"),l=require("@nivo/colors"),d=require("@nivo/grid"),s=require("@nivo/canvas");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(this,arguments)}function c(e,o){if(null==e)return{};var t,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],o.indexOf(t)>=0||(i[t]=e[t]);return i}var v,p={hiddenIds:[],fillDirection:"top",padding:0,colors:{scheme:"nivo"},emptyColor:"#cccccc",emptyOpacity:1,borderRadius:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,tooltip:function(e){var o=e.data;return i.jsx(n.BasicTooltip,{id:o.label,value:o.formattedValue,enableChip:!0,color:o.color})},role:"img",animate:!0,motionConfig:"gentle"},f=u({},p,{layers:["cells","areas","legends"],cellComponent:function(e){var o=e.cell,t=e.animatedProps,n=e.borderRadius,a=e.borderWidth,l=e.testIdPrefix;return i.jsx(r.animated.rect,{x:t.x,y:t.y,width:t.size,height:t.size,rx:n,ry:n,opacity:t.opacity,fill:o.fill||t.color,stroke:t.borderColor,strokeWidth:a,"data-test-id":l?l+".cell_"+o.key:void 0})},defs:[],fill:[],legends:[],motionStagger:0}),h=u({},p,{layers:["cells","areas"],cellComponent:function(e){var o=e.cell,t=e.animatedProps,n=e.borderRadius,a=e.borderWidth,l=e.testIdPrefix;return i.jsx(r.animated.div,{style:{position:"absolute",top:t.y,left:t.x,width:t.size,height:t.size,background:t.color,opacity:t.opacity,boxSizing:"content-box",borderStyle:"solid",borderRadius:n+"px",borderWidth:a+"px",borderColor:t.borderColor},"data-test-id":l?""+l+o.key:void 0})},defs:[],fill:[],legends:[],motionStagger:0}),m=u({},p,{legends:[],pixelRatio:"undefined"!=typeof window&&null!=(v=window.devicePixelRatio)?v:1}),g=function(e){return void 0!==e.data},b=function(t){var r=t.width,i=t.height,n=t.data,a=t.hiddenIds,s=t.valueFormat,c=t.total,v=t.rows,f=t.columns,h=t.fillDirection,m=void 0===h?p.fillDirection:h,b=t.colors,y=void 0===b?p.colors:b,C=t.emptyColor,x=void 0===C?p.emptyColor:C,M=t.emptyOpacity,I=void 0===M?p.emptyOpacity:M,w=t.borderColor,D=void 0===w?p.borderColor:w,W=t.forwardLegendData,k=t.defs,j=void 0===k?[]:k,L=t.fill,E=void 0===L?[]:L,R=o.useValueFormatter(s),P=l.useOrdinalColorScale(y,"id"),O=o.useTheme(),S=l.useInheritedColor(D,O),F=c/(v*f),B=e.useMemo((function(){var e=0,o=[];return n.forEach((function(t,r){var i=a.includes(t.id),n=e,l=n;i||(l=n+Math.round(t.value/F)),e=l;var d=P(t),s={id:t.id,isHidden:i,label:t.label,value:t.value,formattedValue:R(t.value),groupIndex:r,startAt:n,endAt:l,color:d,borderColor:d,data:t,polygons:[]};s.borderColor=S(s),o.push(s)})),o}),[n,a,F,R,P,S]),H=e.useMemo((function(){return o.bindDefs(j,B,E)}),[B,j,E]),q=e.useMemo((function(){return function(e){var o=e.width,t=e.height,r=e.rows,i=e.columns,n=e.fillDirection,a=e.emptyColor,l=e.emptyOpacity,s=(0,e.getBorderColor)({color:a});return d.generateGrid({width:o,height:t,rows:r,columns:i,fillDirection:n,square:!0,extend:function(e,o){return u({},e,{x:o[0]+e.x,y:o[1]+e.y,color:a,opacity:l,borderColor:s})}}).cells}({width:r,height:i,rows:v,columns:f,fillDirection:m,emptyColor:x,emptyOpacity:I,getBorderColor:S})}),[r,i,v,f,m,x,I,S]),T=e.useMemo((function(){return function(e,o){var t=e.map((function(e){return u({},e)}));return o.forEach((function(e){for(var o=e.startAt;o<e.endAt;o++){var r=t[o];if(void 0!==r){var i=r;i.data=e,i.color=e.color,i.opacity=1,i.borderColor=e.borderColor,e.fill&&(i.fill=e.fill)}}}),[]),t}(q,B)}),[q,B]),z=e.useMemo((function(){return function(e){for(var o=e.reduce((function(e,o){return(e[o.data.id]=e[o.data.id]||[]).push(o),e}),{}),t={},r=0,i=Object.entries(o);r<i.length;r++){var n=i[r],a=n[0],l=n[1];t[a]=d.getCellsPolygons(l)}return t}(T.filter(g))}),[T]);B.forEach((function(e){e.id in z&&(e.polygons=z[e.id])}));var A=e.useMemo((function(){var e=B.map((function(e){return{id:e.id,label:e.label,color:e.color,data:e}}));return["top","left"].includes(m)&&e.reverse(),e}),[B,m]),G=e.useRef(W);return e.useEffect((function(){"function"==typeof G.current&&G.current(A)}),[G,A]),{cells:T,computedData:B,legendData:A,getBorderColor:S,boundDefs:H}},y=function(){return e.useMemo((function(){return a.line().curve(a.curveLinearClosed)}),[])},C=function(o,t,r){var i=t.onMouseEnter,a=t.onMouseMove,l=t.onMouseLeave,d=t.onClick,s=n.useTooltip(),u=s.showTooltipFromEvent,c=s.hideTooltip;return{handleMouseEnter:e.useCallback((function(t){u(e.createElement(r,{data:o}),t),null==i||i(o,t)}),[u,o,i]),handleMouseMove:e.useCallback((function(t){u(e.createElement(r,{data:o}),t),null==a||a(o,t)}),[u,o,a]),handleMouseLeave:e.useCallback((function(e){c(),null==l||l(o,e)}),[c,o,l]),handleClick:e.useCallback((function(e){c(),null==d||d(o,e)}),[c,o,d])}},x=function(t){var i=t.cells,n=t.padding,a=t.motionStagger,l=o.useMotionConfig(),d=l.animate,s=l.config,u=e.useMemo((function(){return function(e){return{x:e.x+n/2,y:e.y+n/2,color:e.color,size:e.width-n,opacity:e.opacity,borderColor:e.borderColor}}}),[n]);return r.useTransition(i,{keys:function(e){return e.key},initial:u,enter:u,update:u,trail:d?a:void 0,config:s,immediate:!d})},M=function(o){var t=o.cells,r=o.computedData;return e.useMemo((function(){return{cells:t,computedData:r}}),[t,r])},I=function(o){var t=o.cells,r=o.cellComponent,n=o.padding,a=o.borderRadius,l=o.borderWidth,d=o.motionStagger,s=o.testIdPrefix,u=x({cells:t,padding:n,motionStagger:d});return i.jsx("g",{children:u((function(o,t){return e.createElement(r,{key:t.key,cell:t,padding:n,animatedProps:o,borderRadius:a,borderWidth:l,testIdPrefix:s})}))})},w=function(e){var o=e.data,t=e.pathGenerator,r=e.isInteractive,n=e.onMouseEnter,a=e.onMouseMove,l=e.onMouseLeave,d=e.onClick,s=e.tooltip,u=e.testIdPrefix,c=C(o,{onMouseEnter:n,onMouseMove:a,onMouseLeave:l,onClick:d},s),v=c.handleMouseEnter,p=c.handleMouseMove,f=c.handleMouseLeave,h=c.handleClick;return i.jsx(i.Fragment,{children:o.polygons.map((function(e,n){return i.jsx("path",{d:t(e),fill:"#000000",fillOpacity:0,onMouseEnter:r?v:void 0,onMouseMove:r?p:void 0,onMouseLeave:r?f:void 0,onClick:r?h:void 0,"data-test-id":u?u+".area_"+o.id+".polygon_"+n:void 0},n)}))})},D=function(e){var o=e.data,t=e.isInteractive,r=e.onMouseEnter,n=e.onMouseMove,a=e.onMouseLeave,l=e.onClick,d=e.tooltip,s=e.testIdPrefix,u=y();return i.jsx("g",{children:o.map((function(e){return e.isHidden?null:i.jsx(w,{data:e,pathGenerator:u,isInteractive:t,onMouseEnter:r,onMouseMove:n,onMouseLeave:a,onClick:l,tooltip:d,testIdPrefix:s},e.id)}))})},W=["isInteractive","animate","motionConfig","theme","renderWrapper"],k=function(r){var n=r.width,a=r.height,l=r.margin,d=r.data,s=r.valueFormat,c=r.total,v=r.rows,p=r.columns,h=r.fillDirection,m=void 0===h?f.fillDirection:h,g=r.padding,y=void 0===g?f.padding:g,C=r.hiddenIds,x=void 0===C?f.hiddenIds:C,w=r.layers,W=void 0===w?f.layers:w,k=r.cellComponent,j=void 0===k?f.cellComponent:k,L=r.colors,E=void 0===L?f.colors:L,R=r.emptyColor,P=void 0===R?f.emptyColor:R,O=r.emptyOpacity,S=void 0===O?f.emptyOpacity:O,F=r.borderRadius,B=void 0===F?f.borderRadius:F,H=r.borderWidth,q=void 0===H?f.borderWidth:H,T=r.borderColor,z=void 0===T?f.borderColor:T,A=r.defs,G=void 0===A?f.defs:A,_=r.fill,V=void 0===_?f.fill:_,J=r.isInteractive,K=void 0===J?f.isInteractive:J,N=r.onMouseEnter,Q=r.onMouseMove,U=r.onMouseLeave,X=r.onClick,Y=r.tooltip,Z=void 0===Y?f.tooltip:Y,$=r.forwardLegendData,ee=r.legends,oe=void 0===ee?f.legends:ee,te=r.motionStagger,re=void 0===te?f.motionStagger:te,ie=r.role,ne=void 0===ie?f.role:ie,ae=r.ariaLabel,le=r.ariaLabelledBy,de=r.ariaDescribedBy,se=r.testIdPrefix,ue=o.useDimensions(n,a,l),ce=ue.outerWidth,ve=ue.outerHeight,pe=ue.margin,fe=ue.innerWidth,he=ue.innerHeight,me=b({width:fe,height:he,data:d,hiddenIds:x,valueFormat:s,total:c,rows:v,columns:p,fillDirection:m,colors:E,emptyColor:P,emptyOpacity:S,borderColor:z,forwardLegendData:$,defs:G,fill:V}),ge=me.cells,be=me.legendData,ye=me.computedData,Ce=me.boundDefs,xe={cells:null,areas:null,legends:null};W.includes("cells")&&(xe.cells=i.jsx(I,{cells:ge,cellComponent:j,padding:y,borderRadius:B,borderWidth:q,motionStagger:re,testIdPrefix:se},"cells")),W.includes("areas")&&(xe.areas=i.jsx(D,{data:ye,isInteractive:K,onMouseEnter:N,onMouseMove:Q,onMouseLeave:U,onClick:X,tooltip:Z,testIdPrefix:se},"areas")),W.includes("legends")&&(xe.legends=i.jsx("g",{children:oe.map((function(e,o){return i.jsx(t.BoxLegendSvg,u({},e,{containerWidth:n,containerHeight:a,data:be}),o)}))},"legends"));var Me=M({cells:ge,computedData:ye});return i.jsx(o.SvgWrapper,{width:ce,height:ve,margin:pe,defs:Ce,role:ne,ariaLabel:ae,ariaLabelledBy:le,ariaDescribedBy:de,children:W.map((function(o,t){var r;return"function"==typeof o?i.jsx(e.Fragment,{children:e.createElement(o,Me)},t):null!=(r=null==xe?void 0:xe[o])?r:null}))})},j=function(e){var t=e.isInteractive,r=void 0===t?f.isInteractive:t,n=e.animate,a=void 0===n?f.animate:n,l=e.motionConfig,d=void 0===l?f.motionConfig:l,s=e.theme,v=e.renderWrapper,p=c(e,W);return i.jsx(o.Container,{animate:a,isInteractive:r,motionConfig:d,renderWrapper:v,theme:s,children:i.jsx(k,u({isInteractive:r},p))})},L=function(o){var t=o.cells,r=o.cellComponent,n=o.padding,a=o.borderRadius,l=o.borderWidth,d=o.motionStagger,s=o.testIdPrefix,u=o.margin,c=x({cells:t,padding:n,motionStagger:d});return i.jsx("div",{style:{position:"absolute",top:u.top,left:u.left},children:c((function(o,t){return e.createElement(r,{key:t.key,cell:t,padding:n,animatedProps:o,borderRadius:a,borderWidth:l,testIdPrefix:s})}))})},E=function(e){var o=e.data,t=e.pathGenerator,r=e.isInteractive,n=e.onMouseEnter,a=e.onMouseMove,l=e.onMouseLeave,d=e.onClick,s=e.tooltip,u=e.testIdPrefix,c=C(o,{onMouseEnter:n,onMouseMove:a,onMouseLeave:l,onClick:d},s),v=c.handleMouseEnter,p=c.handleMouseMove,f=c.handleMouseLeave,h=c.handleClick;return i.jsx(i.Fragment,{children:o.polygons.map((function(e,n){return i.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",clipPath:"path('"+t(e)+"')"},onMouseEnter:r?v:void 0,onMouseMove:r?p:void 0,onMouseLeave:r?f:void 0,onClick:r?h:void 0,"data-test-id":u?u+".area_"+o.id+".polygon_"+n:void 0},n)}))})},R=function(e){var o=e.data,t=e.margin,r=e.isInteractive,n=e.onMouseEnter,a=e.onMouseMove,l=e.onMouseLeave,d=e.onClick,s=e.tooltip,u=e.testIdPrefix,c=y();return i.jsx("div",{style:{position:"absolute",top:t.top,left:t.left,width:"100%",height:"100%"},children:o.map((function(e){return e.isHidden?null:i.jsx(E,{data:e,pathGenerator:c,isInteractive:r,onMouseEnter:n,onMouseMove:a,onMouseLeave:l,onClick:d,tooltip:s,testIdPrefix:u},e.id)}))})},P=["isInteractive","animate","motionConfig","theme","renderWrapper"],O=function(t){var r=t.width,n=t.height,a=t.margin,l=t.data,d=t.valueFormat,s=t.total,u=t.rows,c=t.columns,v=t.fillDirection,p=void 0===v?h.fillDirection:v,f=t.hiddenIds,m=void 0===f?h.hiddenIds:f,g=t.padding,y=void 0===g?h.padding:g,C=t.layers,x=void 0===C?h.layers:C,I=t.cellComponent,w=void 0===I?h.cellComponent:I,D=t.colors,W=void 0===D?h.colors:D,k=t.emptyColor,j=void 0===k?h.emptyColor:k,E=t.emptyOpacity,P=void 0===E?h.emptyOpacity:E,O=t.borderRadius,S=void 0===O?h.borderRadius:O,F=t.borderWidth,B=void 0===F?h.borderWidth:F,H=t.borderColor,q=void 0===H?h.borderColor:H,T=t.isInteractive,z=void 0===T?h.isInteractive:T,A=t.onMouseEnter,G=t.onMouseMove,_=t.onMouseLeave,V=t.onClick,J=t.tooltip,K=void 0===J?h.tooltip:J,N=t.forwardLegendData,Q=t.motionStagger,U=void 0===Q?h.motionStagger:Q,X=t.role,Y=void 0===X?h.role:X,Z=t.ariaLabel,$=t.ariaLabelledBy,ee=t.ariaDescribedBy,oe=t.testIdPrefix,te=o.useDimensions(r,n,a),re=te.outerWidth,ie=te.outerHeight,ne=te.margin,ae=te.innerWidth,le=te.innerHeight,de=b({width:ae,height:le,data:l,hiddenIds:m,valueFormat:d,total:s,rows:u,columns:c,fillDirection:p,colors:W,emptyColor:j,emptyOpacity:P,borderColor:q,forwardLegendData:N}),se=de.cells,ue=de.computedData,ce={cells:null,areas:null};x.includes("cells")&&(ce.cells=i.jsx(L,{cells:se,cellComponent:w,padding:y,margin:ne,borderRadius:S,borderWidth:B,motionStagger:U,testIdPrefix:oe},"cells")),x.includes("areas")&&(ce.areas=i.jsx(R,{data:ue,margin:ne,isInteractive:z,onMouseEnter:A,onMouseMove:G,onMouseLeave:_,onClick:V,tooltip:K,testIdPrefix:oe},"areas"));var ve=M({cells:se,computedData:ue});return i.jsx("div",{style:{position:"relative",width:re,height:ie},role:Y,"aria-label":Z,"aria-labelledby":$,"aria-describedby":ee,children:x.map((function(o,t){var r;return"function"==typeof o?i.jsx(e.Fragment,{children:e.createElement(o,ve)},t):null!=(r=null==ce?void 0:ce[o])?r:null}))})},S=function(e){var t=e.isInteractive,r=void 0===t?h.isInteractive:t,n=e.animate,a=void 0===n?h.animate:n,l=e.motionConfig,d=void 0===l?h.motionConfig:l,s=e.theme,v=e.renderWrapper,p=c(e,P);return i.jsx(o.Container,{animate:a,isInteractive:r,motionConfig:d,renderWrapper:v,theme:s,children:i.jsx(O,u({isInteractive:r},p))})},F=["theme","isInteractive","animate","motionConfig","renderWrapper"],B=function(e,t,r,i){return e.find((function(e){return o.isCursorInRect(t.left+e.x,t.top+e.y,e.width,e.height,r,i)}))},H=function(r){var a=r.width,l=r.height,d=r.margin,c=r.data,v=r.valueFormat,p=r.total,f=r.rows,h=r.columns,y=r.fillDirection,C=void 0===y?m.fillDirection:y,x=r.hiddenIds,M=void 0===x?m.hiddenIds:x,I=r.padding,w=void 0===I?m.padding:I,D=r.colors,W=void 0===D?m.colors:D,k=r.emptyColor,j=void 0===k?m.emptyColor:k,L=r.emptyOpacity,E=void 0===L?m.emptyOpacity:L,R=r.borderRadius,P=void 0===R?m.borderRadius:R,O=r.borderWidth,S=void 0===O?m.borderWidth:O,F=r.borderColor,H=void 0===F?m.borderColor:F,q=r.isInteractive,T=void 0===q?m.isInteractive:q,z=r.onMouseMove,A=r.onClick,G=r.tooltip,_=void 0===G?m.tooltip:G,V=r.forwardLegendData,J=r.legends,K=void 0===J?m.legends:J,N=r.role,Q=void 0===N?m.role:N,U=r.ariaLabel,X=r.ariaLabelledBy,Y=r.ariaDescribedBy,Z=r.pixelRatio,$=void 0===Z?m.pixelRatio:Z,ee=e.useRef(null),oe=o.useDimensions(a,l,d),te=oe.margin,re=oe.innerWidth,ie=oe.innerHeight,ne=oe.outerWidth,ae=oe.outerHeight,le=b({width:re,height:ie,data:c,hiddenIds:M,valueFormat:v,total:p,rows:f,columns:h,fillDirection:C,colors:W,emptyColor:j,emptyOpacity:E,borderColor:H,forwardLegendData:V}),de=le.cells,se=le.legendData,ue=o.useTheme();e.useEffect((function(){if(null!==ee.current){var e=ee.current.getContext("2d");null!==e&&(ee.current.width=ne*$,ee.current.height=ae*$,e.scale($,$),e.fillStyle=ue.background,e.fillRect(0,0,ne,ae),e.translate(te.left,te.top),de.forEach((function(o){e.save(),e.fillStyle=o.color,e.globalAlpha=o.opacity;var t=o.x+w/2,r=o.y+w/2,i=o.width-w,n=o.height-w;e.beginPath(),s.roundedRect(e,t,r,i,n,P),e.fill(),S>0&&(e.strokeStyle=o.borderColor,e.lineWidth=S,e.beginPath(),s.roundedRect(e,t,r,i,n,P),e.stroke()),e.restore()})),K.forEach((function(o){t.renderLegendToCanvas(e,u({},o,{data:se,containerWidth:a,containerHeight:l,theme:ue}))})))}}),[ee,te,ne,ae,de,w,P,S,ue,a,l,$,K,se]);var ce=n.useTooltip(),ve=ce.showTooltipFromEvent,pe=ce.hideTooltip,fe=e.useCallback((function(t){if(null!==ee.current){var r=o.getRelativeCursor(ee.current,t),i=r[0],n=r[1],a=B(de,te,i,n);void 0!==a&&g(a)?(ve(e.createElement(_,{data:a.data}),t,"top"),null==z||z(a.data,t)):pe()}}),[ee,de,te,ve,pe,_,z]),he=e.useCallback((function(){pe()}),[pe]),me=e.useCallback((function(e){if(A&&null!==ee.current){var t=o.getRelativeCursor(ee.current,e),r=t[0],i=t[1],n=B(de,te,r,i);void 0!==n&&g(n)&&A(n.data,e)}}),[ee,de,te,A]);return i.jsx("canvas",{ref:ee,width:ne*$,height:ae*$,style:{width:ne,height:ae},onMouseEnter:T?fe:void 0,onMouseMove:T?fe:void 0,onMouseLeave:T?he:void 0,onClick:T?me:void 0,role:Q,"aria-label":U,"aria-labelledby":X,"aria-describedby":Y})},q=function(e){var t=e.theme,r=e.isInteractive,n=void 0===r?m.isInteractive:r,a=e.animate,l=void 0===a?m.animate:a,d=e.motionConfig,s=void 0===d?m.motionConfig:d,v=e.renderWrapper,p=c(e,F);return i.jsx(o.Container,{isInteractive:n,animate:l,motionConfig:s,theme:t,renderWrapper:v,children:i.jsx(H,u({isInteractive:n},p))})};exports.ResponsiveWaffle=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(j,u({width:t,height:r},e))}})},exports.ResponsiveWaffleCanvas=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(q,u({width:t,height:r},e))}})},exports.ResponsiveWaffleHtml=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(S,u({width:t,height:r},e))}})},exports.Waffle=j,exports.WaffleCanvas=q,exports.WaffleHtml=S,exports.canvasDefaultProps=m,exports.commonDefaultProps=p,exports.htmlDefaultProps=h,exports.isDataCell=g,exports.svgDefaultProps=f;
//# sourceMappingURL=nivo-waffle.cjs.js.map
