"use strict";var e=require("react"),o=require("@nivo/core"),r=require("@nivo/axes"),t=require("@nivo/voronoi"),i=require("@nivo/tooltip"),n=require("react/jsx-runtime"),a=require("@nivo/colors"),u=require("@nivo/annotations"),s=require("lodash/isNumber"),l=require("lodash/isPlainObject"),c=require("lodash/isString"),d=require("lodash/get"),v=require("d3-scale"),h=require("d3-force"),g=require("@nivo/scales"),f=require("@react-spring/web");function p(e){var o=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}})),o.default=e,Object.freeze(o)}var m=p(e);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},x.apply(this,arguments)}function y(e,o){if(null==e)return{};var r,t,i={},n=Object.keys(e);for(t=0;t<n.length;t++)r=n[t],o.indexOf(r)>=0||(i[r]=e[r]);return i}var S,M=function(e){var o=e.id,r=e.formattedValue,t=e.color;return n.jsx(i.BasicTooltip,{id:o,value:r,enableChip:!0,color:t})},C={id:"id",value:"value",valueScale:{type:"linear",min:0,max:"auto"},groupBy:"group",size:6,spacing:2,layout:"vertical",gap:0,forceStrength:1,simulationIterations:120,colors:{scheme:"nivo"},colorBy:"group",borderWidth:0,borderColor:"rgba(0, 0, 0, 0)",layers:["grid","axes","circles","annotations","mesh"],enableGridX:!0,enableGridY:!0,axisTop:{},axisRight:{},axisBottom:{},axisLeft:{},isInteractive:!0,useMesh:!1,debugMesh:!1,tooltip:M,animate:!0,motionConfig:"gentle",annotations:[],role:"img",pixelRatio:"undefined"!=typeof window&&null!=(S=window.devicePixelRatio)?S:1},b=function(e){var o=e.width,r=e.height,t=e.axis,i=e.groups,n=e.gap;if(!Array.isArray(i)||0===i.length)throw new Error("'groups' should be an array containing at least one item");var a,u=i.length;"x"===t?a=(r-n*(u-1))/u:"y"===t&&(a=(o-n*(u-1))/u);var s=i.map((function(e,o){return o*(a+n)+a/2}));return v.scaleOrdinal(s).domain(i)},w=function(e){var o=e.width,r=e.height,t=e.axis,i=e.getValue,n=e.scale,a=e.data.map(i);if("time"===n.type){var u=[{data:a.map((function(e){var o;return{data:(o={x:null,y:null},o[t]=e,o)}}))}],s=g.generateSeriesAxis(u,t,n);return g.computeScale(n,s,"x"===t?o:r,t)}var l=Math.min.apply(Math,a),c=Math.max.apply(Math,a);return g.computeScale(n,{all:a,min:l,max:c},"x"===t?o:r,t)},k=function(e){if("function"==typeof e)return e;if(s(e))return function(){return e};if(l(e)){if(!c(e.key))throw new Error("Size is invalid, key should be a string pointing to the property to use to determine node size");if(!Array.isArray(e.values)||2!==e.values.length)throw new Error("Size is invalid, values spec should be an array containing two values, min and max");if(!Array.isArray(e.sizes)||2!==e.sizes.length)throw new Error("Size is invalid, sizes spec should be an array containing two values, min and max");var o=v.scaleLinear().domain([e.values[0],e.values[1]]).range([e.sizes[0],e.sizes[1]]);return function(r){return o(d(r,e.key))}}throw new Error("Size is invalid, it should be either a function, a number or an object")},I=function(e){var o,r,t=e.axis,i=e.valueScale,n=e.ordinalScale,a=e.spacing,u=e.forceStrength,s=h.forceCollide((function(e){return e.size/2+a/2}));if("x"===t)o=h.forceX((function(e){return i(e.value)})).strength(u),r=h.forceY((function(e){return n(e.group)}));else{if("y"!==t)throw new Error("Invalid axis provided: "+t);o=h.forceX((function(e){return n(e.group)})),r=h.forceY((function(e){return i(e.value)})).strength(u)}return{x:o,y:r,collision:s}},W=function(e){var o,r,t=e.data,i=e.getId,n=e.layout,a=e.getValue,u=e.valueScale,s=e.getGroup,l=e.ordinalScale,c=e.getSize,d=e.forces,v=e.simulationIterations,f=e.valueScaleConfig,p={horizontal:["x","y"],vertical:["y","x"]},m="time"===(r=f).type&&"native"!==r.format?g.createDateNormalizer(r):function(e){return e},y=t.map((function(e){return{id:i(e),group:s(e),value:m(a(e)),size:c(e),data:x({},e)}})),S=h.forceSimulation(y).force("x",d.x).force("y",d.y).force("collide",d.collision).stop();return S.tick(v),(o={})[p[n][0]+"Scale"]=u,o[p[n][1]+"Scale"]=l,o.nodes=S.nodes(),o},j=function(o){var r=o.width,t=o.height,i=o.axis,n=o.getValue,a=o.scale,u=o.data;return e.useMemo((function(){return w({width:r,height:t,axis:i,getValue:n,scale:a,data:u})}),[r,t,i,n,a,u])},z=function(o){var r=o.width,t=o.height,i=o.axis,n=o.groups,a=o.gap;return e.useMemo((function(){return b({width:r,height:t,axis:i,groups:n,gap:a})}),[r,t,i,n,a])},E=function(o){var r=o.axis,t=o.valueScale,i=o.ordinalScale,n=o.spacing,a=o.forceStrength;return e.useMemo((function(){return I({axis:r,valueScale:t,ordinalScale:i,spacing:n,forceStrength:a})}),[r,t,i,n,a])},B=function(r){var t=r.data,i=r.width,n=r.height,u=r.id,s=r.value,l=r.valueFormat,c=r.valueScale,d=r.groups,v=r.groupBy,h=r.size,g=r.spacing,f=r.layout,p=r.gap,m=r.forceStrength,y=r.simulationIterations,S=r.colors,M=r.colorBy,C="horizontal"===f?"x":"y",b=o.usePropertyAccessor(u),w=o.usePropertyAccessor(s),I=o.useValueFormatter(l),B=o.usePropertyAccessor(v),T=function(o){return e.useMemo((function(){return k(o)}),[o])}(h),P=o.usePropertyAccessor(M),L=a.useOrdinalColorScale(S,P),V=j({width:i,height:n,axis:C,getValue:w,scale:c,data:t}),O=z({width:i,height:n,axis:C,groups:d,gap:p}),R=E({axis:C,valueScale:V,ordinalScale:O,spacing:g,forceStrength:m}),q=e.useMemo((function(){return W({data:t,getId:b,layout:f,getValue:w,valueScale:V,getGroup:B,ordinalScale:O,getSize:T,forces:R,simulationIterations:y,valueScaleConfig:c})}),[t,b,f,w,V,B,O,T,R,y,c]),A=q.nodes,F=q.xScale,G=q.yScale;return{nodes:e.useMemo((function(){return A.map((function(e){return x({},e,{formattedValue:I(e.value),color:L(e)})}))}),[A,I,L]),xScale:F,yScale:G,getColor:L}},T=function(o){return e.useMemo((function(){return"function"==typeof o?o:function(){return o}}),[o])},P=function(o){var r=o.isInteractive,t=o.onClick,n=o.onMouseEnter,a=o.onMouseLeave,u=o.onMouseMove,s=o.tooltip,l=i.useTooltip(),c=l.showTooltipFromEvent,d=l.hideTooltip;return{onMouseEnter:e.useCallback((function(e,o){r&&(c(s(e),o),null==n||n(e,o))}),[r,n,c,s]),onMouseMove:e.useCallback((function(e,o){r&&(c(s(e),o),null==u||u(e,o))}),[r,u,c,s]),onMouseLeave:e.useCallback((function(e,o){r&&(d(),null==a||a(e,o))}),[r,d,a]),onClick:e.useCallback((function(e,o){r&&(null==t||t(e,o))}),[r,t])}},L=function(e){return{x:e.x,y:e.y}},V=function(e){return{size:e.size,width:e.size,height:e.size}},O=function(e,o){return u.useAnnotations({data:e,annotations:o,getPosition:L,getDimensions:V})},R=function(o){var r=o.nodes,t=o.xScale,i=o.yScale,n=o.innerWidth,a=o.innerHeight,u=o.outerWidth,s=o.outerHeight,l=o.margin;return e.useMemo((function(){return{nodes:r,xScale:t,yScale:i,innerWidth:n,innerHeight:a,outerWidth:u,outerHeight:s,margin:l}}),[r,t,i,n,a,u,s,l])},q=function(r){var t=r.nodes,u=r.borderWidth,s=r.borderColor,l=r.component,c=r.isInteractive,d=r.onMouseEnter,v=r.onMouseMove,h=r.onMouseLeave,g=r.onClick,p=r.tooltip,y=i.useTooltip(),S=y.showTooltipFromEvent,M=y.hideTooltip,C=e.useMemo((function(){if(c)return function(o,r){S(e.createElement(p,o),r),null==d||d(o,r)}}),[c,S,p,d]),b=e.useMemo((function(){if(c)return function(o,r){S(e.createElement(p,o),r),null==v||v(o,r)}}),[c,S,p,v]),w=e.useMemo((function(){if(c)return function(e,o){M(),null==h||h(e,o)}}),[c,M,h]),k=e.useMemo((function(){if(c)return function(e,o){null==g||g(e,o)}}),[c,g]),I=o.useMotionConfig(),W=I.animate,j=I.config,z=o.useTheme(),E=T(u),B=a.useInheritedColor(s,z),P=e.useMemo((function(){return function(e){return{enter:function(o){return{x:o.x,y:o.y,radius:0,color:o.color,borderColor:e(o),opacity:0}},update:function(o){return{x:o.x,y:o.y,radius:o.size/2,color:o.color,borderColor:e(o),opacity:1}},leave:function(o){return{x:o.x,y:o.y,radius:0,color:o.color,borderColor:e(o),opacity:0}}}}(B)}),[B]),L=f.useTransition(t,{keys:function(e){return e.id},initial:P.update,from:P.enter,enter:P.update,update:P.update,leave:P.leave,config:j,immediate:!W});return n.jsx(n.Fragment,{children:L((function(e,o){return m.createElement(l,{key:o.id,node:o,style:x({},e,{radius:(r=e.radius,f.to([r],(function(e){return Math.max(0,e)}))),borderWidth:E(o)}),onMouseEnter:C,onMouseMove:b,onMouseLeave:w,onClick:k});var r}))})},A=function(e){var o=e.node,r=e.style,t=e.onMouseEnter,i=e.onMouseMove,a=e.onMouseLeave,u=e.onClick;return n.jsx(f.animated.circle,{cx:r.x,cy:r.y,r:r.radius,fill:r.color,stroke:r.borderColor,strokeWidth:r.borderWidth,opacity:r.opacity,onMouseEnter:function(e){return null==t?void 0:t(o,e)},onMouseMove:function(e){return null==i?void 0:i(o,e)},onMouseLeave:function(e){return null==a?void 0:a(o,e)},onClick:function(e){return null==u?void 0:u(o,e)}},o.id)},F=function(e){var o=e.nodes,r=e.annotations,t=O(o,r);return n.jsx(n.Fragment,{children:t.map((function(e,o){return n.jsx(u.Annotation,x({},e),o)}))})},G=["nodes"],H=["theme","isInteractive","animate","motionConfig","renderWrapper"],X=function(i){var a=i.data,u=i.width,s=i.height,l=i.margin,c=i.id,d=void 0===c?C.id:c,v=i.value,h=void 0===v?C.value:v,g=i.valueScale,f=void 0===g?C.valueScale:g,p=i.valueFormat,m=i.groups,x=i.groupBy,S=void 0===x?C.groupBy:x,M=i.size,b=void 0===M?C.size:M,w=i.forceStrength,k=void 0===w?C.forceStrength:w,I=i.simulationIterations,W=void 0===I?C.simulationIterations:I,j=i.colors,z=void 0===j?C.colors:j,E=i.colorBy,T=void 0===E?C.colorBy:E,L=i.borderColor,V=void 0===L?C.borderColor:L,O=i.borderWidth,H=void 0===O?C.borderWidth:O,X=i.layout,Y=void 0===X?C.layout:X,D=i.spacing,N=void 0===D?C.spacing:D,J=i.gap,K=void 0===J?C.gap:J,Q=i.layers,U=void 0===Q?C.layers:Q,Z=i.circleComponent,$=void 0===Z?A:Z,_=i.useMesh,ee=void 0===_?C.useMesh:_,oe=i.debugMesh,re=void 0===oe?C.debugMesh:oe,te=i.enableGridX,ie=void 0===te?C.enableGridX:te,ne=i.gridXValues,ae=i.enableGridY,ue=void 0===ae?C.enableGridY:ae,se=i.gridYValues,le=i.axisTop,ce=void 0===le?C.axisTop:le,de=i.axisRight,ve=void 0===de?C.axisRight:de,he=i.axisBottom,ge=void 0===he?C.axisBottom:he,fe=i.axisLeft,pe=void 0===fe?C.axisLeft:fe,me=i.isInteractive,xe=i.onMouseEnter,ye=i.onMouseMove,Se=i.onMouseLeave,Me=i.onClick,Ce=i.tooltip,be=void 0===Ce?C.tooltip:Ce,we=i.annotations,ke=void 0===we?C.annotations:we,Ie=i.role,We=void 0===Ie?C.role:Ie,je=o.useDimensions(u,s,l),ze=je.outerWidth,Ee=je.outerHeight,Be=je.margin,Te=je.innerWidth,Pe=je.innerHeight,Le=B({width:Te,height:Pe,data:a,id:d,value:h,valueFormat:p,valueScale:f,groups:m,groupBy:S,size:b,spacing:N,layout:Y,gap:K,colors:z,colorBy:T,forceStrength:k,simulationIterations:W}),Ve=Le.nodes,Oe=y(Le,G),Re=Oe.xScale,qe=Oe.yScale,Ae=P({isInteractive:me,onClick:Me,onMouseEnter:xe,onMouseLeave:Se,onMouseMove:ye,tooltip:be}),Fe={grid:null,axes:null,circles:null,annotations:null,mesh:null};U.includes("grid")&&(Fe.grid=n.jsx(r.Grid,{width:Te,height:Pe,xScale:ie?Re:null,xValues:ne,yScale:ue?qe:null,yValues:se},"grid")),U.includes("axes")&&(Fe.axes=n.jsx(r.Axes,{xScale:Re,yScale:qe,width:Te,height:Pe,top:null!=ce?ce:void 0,right:null!=ve?ve:void 0,bottom:null!=ge?ge:void 0,left:null!=pe?pe:void 0},"axes")),U.includes("circles")&&(Fe.circles=n.jsx(q,{nodes:Ve,borderWidth:H,borderColor:V,isInteractive:me,tooltip:be,component:$,onMouseEnter:xe,onMouseMove:ye,onMouseLeave:Se,onClick:Me},"circles")),U.includes("annotations")&&(Fe.annotations=n.jsx(F,{nodes:Ve,annotations:ke},"annotations")),me&&ee&&(Fe.mesh=n.jsx(t.Mesh,{nodes:Ve,width:Te,height:Pe,onMouseEnter:Ae.onMouseEnter,onMouseMove:Ae.onMouseMove,onMouseLeave:Ae.onMouseLeave,onClick:Ae.onClick,debug:re},"mesh"));var Ge=R({nodes:Ve,xScale:Re,yScale:qe,innerWidth:Te,innerHeight:Pe,outerWidth:ze,outerHeight:Ee,margin:Be});return n.jsx(o.SvgWrapper,{width:ze,height:Ee,margin:Be,role:We,children:U.map((function(o,r){return void 0!==Fe[o]?Fe[o]:"function"==typeof o?n.jsx(e.Fragment,{children:e.createElement(o,Ge)},r):null}))})},Y=function(e){var r=e.theme,t=e.isInteractive,i=void 0===t?C.isInteractive:t,a=e.animate,u=void 0===a?C.animate:a,s=e.motionConfig,l=void 0===s?C.motionConfig:s,c=e.renderWrapper,d=y(e,H);return n.jsx(o.Container,{isInteractive:i,animate:u,motionConfig:l,theme:r,renderWrapper:c,children:n.jsx(X,x({isInteractive:i},d))})},D=["nodes"],N=["theme","isInteractive","animate","motionConfig","renderWrapper"],J=function(e,o){var r=o.node,t=o.getBorderWidth,i=o.getBorderColor,n=t(r);n>0&&(e.strokeStyle=i(r),e.lineWidth=n),e.beginPath(),e.arc(r.x,r.y,r.size/2,0,2*Math.PI),e.fillStyle=r.color,e.fill(),n>0&&e.stroke()},K=function(u){var l=u.data,c=u.width,d=u.height,v=u.margin,h=u.id,g=void 0===h?C.id:h,f=u.value,p=void 0===f?C.value:f,m=u.valueFormat,x=u.valueScale,S=void 0===x?C.valueScale:x,M=u.groups,b=u.groupBy,w=void 0===b?C.groupBy:b,k=u.size,I=void 0===k?C.size:k,W=u.forceStrength,j=void 0===W?C.forceStrength:W,z=u.simulationIterations,E=void 0===z?C.simulationIterations:z,T=u.colors,P=void 0===T?C.colors:T,L=u.colorBy,V=void 0===L?C.colorBy:L,O=u.borderColor,R=void 0===O?C.borderColor:O,q=u.layout,A=void 0===q?C.layout:q,F=u.spacing,G=void 0===F?C.spacing:F,H=u.gap,X=void 0===H?C.gap:H,Y=u.layers,N=void 0===Y?C.layers:Y,K=u.renderCircle,Q=void 0===K?J:K,U=u.debugMesh,Z=void 0===U?C.debugMesh:U,$=u.enableGridX,_=u.gridXValues,ee=u.enableGridY,oe=u.gridYValues,re=u.axisTop,te=void 0===re?C.axisTop:re,ie=u.axisRight,ne=void 0===ie?C.axisRight:ie,ae=u.axisBottom,ue=void 0===ae?C.axisBottom:ae,se=u.axisLeft,le=void 0===se?C.axisLeft:se,ce=u.isInteractive,de=u.onMouseMove,ve=u.onClick,he=u.tooltip,ge=void 0===he?C.tooltip:he,fe=u.role,pe=void 0===fe?C.role:fe,me=u.pixelRatio,xe=void 0===me?C.pixelRatio:me,ye=e.useRef(null),Se=o.useTheme(),Me=e.useState(null),Ce=Me[0],be=Me[1],we=o.useDimensions(c,d,v),ke=we.outerWidth,Ie=we.outerHeight,We=we.margin,je=we.innerWidth,ze=we.innerHeight,Ee=B({width:je,height:ze,data:l,id:g,value:p,valueFormat:m,valueScale:S,groups:M,groupBy:w,size:I,spacing:G,layout:A,gap:X,colors:P,colorBy:V,forceStrength:j,simulationIterations:E}),Be=Ee.nodes,Te=y(Ee,D),Pe=Te.xScale,Le=Te.yScale,Ve=t.useVoronoiMesh({points:Be,width:je,height:ze,debug:Z}),Oe=Ve.delaunay,Re=Ve.voronoi,qe=a.useInheritedColor(R,Se),Ae=function(){return 1};e.useEffect((function(){if(ye.current){ye.current.width=ke*xe,ye.current.height=Ie*xe;var e=ye.current.getContext("2d");e&&(e.scale(xe,xe),e.fillStyle=Se.background,e.fillRect(0,0,ke,Ie),e.save(),e.translate(We.left,We.top),N.forEach((function(o){"grid"===o&&s(Se.grid.line.strokeWidth)&&Se.grid.line.strokeWidth>0&&(e.lineWidth=Se.grid.line.strokeWidth,e.strokeStyle=Se.grid.line.stroke,$&&r.renderGridLinesToCanvas(e,{width:je,height:ze,scale:Pe,axis:"x",values:_}),ee&&r.renderGridLinesToCanvas(e,{width:je,height:ze,scale:Le,axis:"y",values:oe})),"axes"===o&&r.renderAxesToCanvas(e,{xScale:Pe,yScale:Le,width:je,height:ze,top:te,right:ne,bottom:ue,left:le,theme:Se}),"circles"===o&&Be.forEach((function(o){Q(e,{node:o,getBorderWidth:Ae,getBorderColor:qe})})),"mesh"===o&&Z&&Re&&(t.renderVoronoiToCanvas(e,Re),Ce&&t.renderVoronoiCellToCanvas(e,Re,Ce.index))})))}}),[ye,ke,Ie,je,ze,xe,We,Se,N,Pe,Le,$,_,ee,oe,te,ne,ue,le,Re,Z,Ce,Be,Q,Ae,qe]);var Fe=e.useCallback((function(e){if(!ye.current)return null;var r=o.getRelativeCursor(ye.current,e),t=r[0],i=r[1];if(!o.isCursorInRect(We.left,We.top,je,ze,t,i))return null;var n=Oe.find(t-We.left,i-We.top);return Be[n]}),[ye,We,je,ze,Oe,Be]),Ge=i.useTooltip(),He=Ge.showTooltipFromEvent,Xe=Ge.hideTooltip,Ye=e.useCallback((function(o,r){He(e.createElement(ge,o),r)}),[He,ge]),De=e.useCallback((function(e){var o=Fe(e);be(o),o?(null==de||de(o,e),Ye(o,e)):Xe()}),[Fe,be,de,Ye,Xe]),Ne=e.useCallback((function(){Xe(),be(null)}),[Xe,be]),Je=e.useCallback((function(e){var o=Fe(e);o&&(null==ve||ve(o,e))}),[Fe,ve]);return n.jsx("canvas",{ref:ye,width:ke*xe,height:Ie*xe,style:{width:ke,height:Ie,cursor:ce?"auto":"normal"},role:pe,onMouseEnter:ce?De:void 0,onMouseMove:ce?De:void 0,onMouseLeave:ce?Ne:void 0,onClick:ce?Je:void 0})},Q=function(e){var r=e.theme,t=e.isInteractive,i=void 0===t?C.isInteractive:t,a=e.animate,u=void 0===a?C.animate:a,s=e.motionConfig,l=void 0===s?C.motionConfig:s,c=e.renderWrapper,d=y(e,N);return n.jsx(o.Container,{isInteractive:i,animate:u,motionConfig:l,theme:r,renderWrapper:c,children:n.jsx(K,x({isInteractive:i},d))})};exports.InnerSwarmPlotCanvas=K,exports.ResponsiveSwarmPlot=function(e){return n.jsx(o.ResponsiveWrapper,{children:function(o){var r=o.width,t=o.height;return n.jsx(Y,x({width:r,height:t},e))}})},exports.ResponsiveSwarmPlotCanvas=function(e){return n.jsx(o.ResponsiveWrapper,{children:function(o){var r=o.width,t=o.height;return n.jsx(Q,x({width:r,height:t},e))}})},exports.SwarmPlot=Y,exports.SwarmPlotCanvas=Q,exports.SwarmPlotTooltip=M,exports.computeForces=I,exports.computeNodes=W,exports.computeOrdinalScale=b,exports.computeValueScale=w,exports.defaultProps=C,exports.getSizeGenerator=k,exports.renderCircleDefault=J,exports.useBorderWidth=T,exports.useForces=E,exports.useNodeMouseHandlers=P,exports.useOrdinalScale=z,exports.useSwarmPlot=B,exports.useSwarmPlotAnnotations=O,exports.useSwarmPlotLayerContext=R,exports.useValueScale=j;
//# sourceMappingURL=nivo-swarmplot.cjs.js.map
