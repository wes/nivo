import{alignBox as e,Container as t,useTheme as o,useDimensions as n,useValueFormatter as r,SvgWrapper as i,ResponsiveWrapper as a,degreesToRadians as d,getRelativeCursor as l,isCursorInRect as c}from"@nivo/core";import{BoxLegendSvg as h,renderLegendToCanvas as u}from"@nivo/legends";import*as s from"react";import{memo as f,useCallback as g,useMemo as v,createElement as m,useRef as y,useState as p,useEffect as x}from"react";import{jsx as b,Fragment as S,jsxs as w}from"react/jsx-runtime";import{useTooltip as W,BasicTooltip as L}from"@nivo/tooltip";import{timeFormat as k}from"d3-time-format";import{scaleQuantize as M}from"d3-scale";import C from"lodash/isDate";import z from"lodash/memoize";import V from"lodash/range";import{timeWeek as O,timeYear as I,timeWeeks as H,timeDays as D,timeMonths as B,timeDay as E,timeSunday as P,timeMonday as F,timeTuesday as R,timeWednesday as T,timeThursday as Y,timeFriday as j,timeSaturday as q}from"d3-time";function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},A.apply(this,arguments)}function X(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}var N,Z=f((function(e){var t=e.years,o=e.legend,n=e.theme;return b(S,{children:t.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:n.labels.text,children:o(e.year)},e.year)}))})})),G=f((function(e){var t=e.path,o=e.borderWidth,n=e.borderColor;return b("path",{d:t,style:{fill:"none",strokeWidth:o,stroke:n,pointerEvents:"none"}})})),J=f((function(e){var t=e.months,o=e.legend,n=e.theme;return b(S,{children:t.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"middle",style:n.labels.text,children:o(e.year,e.month,e.date)},e.date.toString()+".legend")}))})})),K=f((function(e){var t=e.data,o=e.x,n=e.y,r=e.size,i=e.color,a=e.borderWidth,d=e.borderColor,l=e.isInteractive,c=e.tooltip,h=e.onMouseEnter,u=e.onMouseMove,f=e.onMouseLeave,v=e.onClick,m=e.formatValue,y=W(),p=y.showTooltipFromEvent,x=y.hideTooltip,S=g((function(e){if("value"in t){var o=A({},t,{value:m(t.value),data:A({},t.data)});p(s.createElement(c,A({},o)),e),null==h||h(t,e)}}),[p,c,t,h,m]),w=g((function(e){if("value"in t){var o=A({},t,{value:m(t.value),data:A({},t.data)});p(s.createElement(c,A({},o)),e),u&&u(t,e)}}),[p,c,t,u,m]),L=g((function(e){"value"in t&&(x(),null==f||f(t,e))}),[x,t,f]),k=g((function(e){return null==v?void 0:v(t,e)}),[t,v]);return b("rect",{x:o,y:n,width:r,height:r,style:{fill:i,strokeWidth:a,stroke:d},onMouseEnter:l?S:void 0,onMouseMove:l?w:void 0,onMouseLeave:l?L:void 0,onClick:l?k:void 0})})),Q=f((function(e){var t=e.value,o=e.day,n=e.color;return void 0===t||isNaN(Number(t))?null:b(L,{id:o,value:t,color:n,enableChip:!0})})),U=k("%b"),$={colors:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],align:"center",direction:"horizontal",emptyColor:"#fff",minValue:0,maxValue:"auto",yearSpacing:30,yearLegend:function(e){return e},yearLegendPosition:"before",yearLegendOffset:10,monthBorderWidth:2,monthBorderColor:"#000",monthSpacing:0,monthLegend:function(e,t,o){return U(o)},monthLegendPosition:"before",monthLegendOffset:10,daySpacing:0,dayBorderWidth:1,dayBorderColor:"#000",isInteractive:!0,legends:[],tooltip:Q},_=A({},$,{role:"img"}),ee=A({},$,{pixelRatio:"undefined"!=typeof window&&null!=(N=window.devicePixelRatio)?N:1}),te=A({},_,{dayBorderColor:"#fff",dayRadius:0,square:!0,weekdayLegendOffset:75,firstWeekday:"sunday"}),oe=function(e,t,o){var n=e.map((function(e){return e.value}));return["auto"===t?Math.min.apply(Math,n):t,"auto"===o?Math.max.apply(Math,n):o]},ne=z((function(e){var t,o=e.date,n=e.cellSize,r=e.yearIndex,i=e.yearSpacing,a=e.monthSpacing,d=e.daySpacing,l=e.direction,c=e.originX,h=e.originY,u=new Date(o.getFullYear(),o.getMonth()+1,0),s=O.count(I(o),o),f=O.count(I(u),u),g=o.getDay(),v=u.getDay(),m=c,y=h,p=r*(7*(n+d)+i),x=o.getMonth()*a;"horizontal"===l?(y+=p,m+=x):(y+=x,m+=p);var b={x:m,y:y,width:0,height:0};return"horizontal"===l?(t=["M"+(m+(s+1)*(n+d))+","+(y+g*(n+d)),"H"+(m+s*(n+d))+"V"+(y+7*(n+d)),"H"+(m+f*(n+d))+"V"+(y+(v+1)*(n+d)),"H"+(m+(f+1)*(n+d))+"V"+y,"H"+(m+(s+1)*(n+d))+"Z"].join(""),b.x=m+s*(n+d),b.width=m+(f+1)*(n+d)-b.x,b.height=7*(n+d)):(t=["M"+(m+g*(n+d))+","+(y+(s+1)*(n+d)),"H"+m+"V"+(y+(f+1)*(n+d)),"H"+(m+(v+1)*(n+d))+"V"+(y+f*(n+d)),"H"+(m+7*(n+d))+"V"+(y+s*(n+d)),"H"+(m+g*(n+d))+"Z"].join(""),b.y=y+s*(n+d),b.width=7*(n+d),b.height=y+(f+1)*(n+d)-b.y),{path:t,bbox:b}}),(function(e){var t=e.date,o=e.cellSize,n=e.yearIndex,r=e.yearSpacing,i=e.monthSpacing,a=e.daySpacing,d=e.direction,l=e.originX,c=e.originY;return t.toString()+"."+o+"."+n+"."+r+"."+i+"."+a+"."+d+"."+l+"."+c})),re=k("%Y-%m-%d"),ie=function(t){var o,n=t.width,r=t.height,i=t.from,a=t.to,d=t.direction,l=t.yearSpacing,c=t.monthSpacing,h=t.daySpacing,u=t.align,s=C(i)?i:new Date(i),f=C(a)?a:new Date(a),g=V(s.getFullYear(),f.getFullYear()+1),v=Math.max.apply(Math,g.map((function(e){return H(new Date(e,0,1),new Date(e+1,0,1)).length})))+1,m=function(e){var t,o,n=e.width,r=e.height,i=e.direction,a=e.yearRange,d=e.yearSpacing,l=e.monthSpacing,c=e.daySpacing,h=e.maxWeeks;return"horizontal"===i?(t=(n-12*l-c*h)/h,o=(r-(a.length-1)*d-a.length*(8*c))/(7*a.length)):(t=(n-(a.length-1)*d-a.length*(8*c))/(7*a.length),o=(r-12*l-c*h)/h),Math.min(t,o)}({width:n,height:r,direction:d,yearRange:g,yearSpacing:l,monthSpacing:c,daySpacing:h,maxWeeks:v}),y=m*v+h*v+12*c,p=7*(m+h)*g.length+l*(g.length-1),x="horizontal"===d?y:p,b="horizontal"===d?p:y,S=e({x:0,y:0,width:x,height:b},{x:0,y:0,width:n,height:r},u),w=S[0],W=S[1];o="horizontal"===d?function(e,t,o,n){return function(r,i,a,d){return{x:r+O.count(I(a),a)*(e+n)+n/2+a.getMonth()*o,y:i+a.getDay()*(e+n)+n/2+d*(t+7*(e+n))}}}(m,l,c,h):function(e,t,o,n){return function(r,i,a,d){var l=O.count(I(a),a);return{x:r+a.getDay()*(e+n)+n/2+d*(t+7*(e+n)),y:i+l*(e+n)+n/2+a.getMonth()*o}}}(m,l,c,h);var L=[],k=[],M=[];return g.forEach((function(e,t){var n=new Date(e,0,1),r=new Date(e+1,0,1);M=M.concat(D(n,r).map((function(e){return A({date:e,day:re(e),size:m},o(w,W,e,t))})));var i=B(n,r).map((function(e){return A({date:e,year:e.getFullYear(),month:e.getMonth()},ne({originX:w,originY:W,date:e,direction:d,yearIndex:t,yearSpacing:l,monthSpacing:c,daySpacing:h,cellSize:m}))}));k=k.concat(i),L.push({year:e,bbox:{x:i[0].bbox.x,y:i[0].bbox.y,width:i[11].bbox.x-i[0].bbox.x+i[11].bbox.width,height:i[11].bbox.y-i[0].bbox.y+i[11].bbox.height}})})),{years:L,months:k,days:M,cellSize:m,calendarWidth:x,calendarHeight:b,originX:w,originY:W}},ae=function(e){var t=e.days,o=e.data,n=e.colorScale,r=e.emptyColor;return t.map((function(e){var t=o.find((function(t){return t.day===e.day}));return A({},e,t?{color:n(t.value),data:t,value:t.value}:{color:r})}))},de=function(e){var t=e.years,o=e.direction,n=e.position,r=e.offset;return t.map((function(e){var t=0,i=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x-r,i=e.bbox.y+e.bbox.height/2,a=-90):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width+r,i=e.bbox.y+e.bbox.height/2,a=-90):"vertical"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y-r):(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y+e.bbox.height+r),A({},e,{x:t,y:i,rotation:a})}))},le=function(e){var t=e.months,o=e.direction,n=e.position,r=e.offset;return t.map((function(e){var t=0,i=0,a=0;return"horizontal"===o&&"before"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y-r):"horizontal"===o&&"after"===n?(t=e.bbox.x+e.bbox.width/2,i=e.bbox.y+e.bbox.height+r):"vertical"===o&&"before"===n?(t=e.bbox.x-r,i=e.bbox.y+e.bbox.height/2,a=-90):(t=e.bbox.x+e.bbox.width+r,i=e.bbox.y+e.bbox.height/2,a=-90),A({},e,{x:t,y:i,rotation:a})}))},ce=function(e){var t=e.width,o=e.height,n=e.from,r=e.to,i=e.direction,a=e.yearSpacing,d=e.monthSpacing,l=e.daySpacing,c=e.align;return v((function(){return ie({width:t,height:o,from:n,to:r,direction:i,yearSpacing:a,monthSpacing:d,daySpacing:l,align:c})}),[t,o,n,r,i,a,d,l,c])},he=function(e){var t=e.data,o=e.minValue,n=e.maxValue,r=e.colors,i=e.colorScale;return v((function(){if(i)return i;var e=oe(t,o,n);return M().domain(e).range(r)}),[t,o,n,r,i])},ue=function(e){var t=e.years,o=e.direction,n=e.yearLegendPosition,r=e.yearLegendOffset;return v((function(){return de({years:t,direction:o,position:n,offset:r})}),[t,o,n,r])},se=function(e){var t=e.months,o=e.direction,n=e.monthLegendPosition,r=e.monthLegendOffset;return v((function(){return le({months:t,direction:o,position:n,offset:r})}),[t,o,n,r])},fe=function(e){var t=e.days,o=e.data,n=e.colorScale,r=e.emptyColor;return v((function(){return ae({days:t,data:o,colorScale:n,emptyColor:r})}),[t,o,n,r])},ge=["months","years"],ve=["isInteractive","renderWrapper","theme"],me=function(e){var t=e.margin,a=e.width,d=e.height,l=e.align,c=void 0===l?_.align:l,u=e.colors,s=void 0===u?_.colors:u,f=e.colorScale,g=e.data,v=e.direction,m=void 0===v?_.direction:v,y=e.emptyColor,p=void 0===y?_.emptyColor:y,x=e.from,S=e.to,W=e.minValue,L=void 0===W?_.minValue:W,k=e.maxValue,M=void 0===k?_.maxValue:k,C=e.valueFormat,z=e.legendFormat,V=e.yearLegend,O=void 0===V?_.yearLegend:V,I=e.yearLegendOffset,H=void 0===I?_.yearLegendOffset:I,D=e.yearLegendPosition,B=void 0===D?_.yearLegendPosition:D,E=e.yearSpacing,P=void 0===E?_.yearSpacing:E,F=e.monthBorderColor,R=void 0===F?_.monthBorderColor:F,T=e.monthBorderWidth,Y=void 0===T?_.monthBorderWidth:T,j=e.monthLegend,q=void 0===j?_.monthLegend:j,N=e.monthLegendOffset,Q=void 0===N?_.monthLegendOffset:N,U=e.monthLegendPosition,$=void 0===U?_.monthLegendPosition:U,ee=e.monthSpacing,te=void 0===ee?_.monthSpacing:ee,oe=e.dayBorderColor,ne=void 0===oe?_.dayBorderColor:oe,re=e.dayBorderWidth,ie=void 0===re?_.dayBorderWidth:re,ae=e.daySpacing,de=void 0===ae?_.daySpacing:ae,le=e.isInteractive,ve=void 0===le?_.isInteractive:le,me=e.tooltip,ye=void 0===me?_.tooltip:me,pe=e.onClick,xe=e.onMouseEnter,be=e.onMouseLeave,Se=e.onMouseMove,we=e.legends,We=void 0===we?_.legends:we,Le=e.role,ke=void 0===Le?_.role:Le,Me=o(),Ce=n(a,d,t),ze=Ce.margin,Ve=Ce.innerWidth,Oe=Ce.innerHeight,Ie=Ce.outerWidth,He=Ce.outerHeight,De=ce({width:Ve,height:Oe,from:x,to:S,direction:m,yearSpacing:P,monthSpacing:te,daySpacing:de,align:c}),Be=De.months,Ee=De.years,Pe=X(De,ge),Fe=he({data:g,minValue:L,maxValue:M,colors:s,colorScale:f}),Re=se({months:Be,direction:m,monthLegendPosition:$,monthLegendOffset:Q}),Te=ue({years:Ee,direction:m,yearLegendPosition:B,yearLegendOffset:H}),Ye=fe({days:Pe.days,data:g,colorScale:Fe,emptyColor:p}),je=r(z),qe=r(C);return w(i,{width:Ie,height:He,margin:ze,role:ke,children:[Ye.map((function(e){return b(K,{data:e,x:e.x,y:e.y,size:e.size,color:e.color,borderWidth:ie,borderColor:ne,onMouseEnter:xe,onMouseLeave:be,onMouseMove:Se,isInteractive:ve,tooltip:ye,onClick:pe,formatValue:qe},e.date.toString())})),Be.map((function(e){return b(G,{path:e.path,borderWidth:Y,borderColor:R},e.date.toString())})),b(J,{months:Re,legend:q,theme:Me}),b(Z,{years:Te,legend:O,theme:Me}),We.map((function(e,t){var o=Fe.ticks(e.itemCount).map((function(e){return{id:e,label:je(e),color:Fe(e)}}));return b(h,A({},e,{containerWidth:a,containerHeight:d,data:o}),t)}))]})},ye=function(e){var o=e.isInteractive,n=void 0===o?_.isInteractive:o,r=e.renderWrapper,i=e.theme,a=X(e,ve);return b(t,{isInteractive:n,renderWrapper:r,theme:i,children:b(me,A({isInteractive:n},a))})},pe=k("%Y-%m-%d"),xe=function(e){var t,o,n=e.direction,r=e.daySpacing,i=e.offset,a=e.square,d=e.totalDays,l=e.width,c=e.height;"horizontal"===n?(l-=i,t=7,o=Math.ceil(d/7)):(c-=i,o=7,t=Math.ceil(d/7));var h=(c-r*(t+1))/t,u=(l-r*(o+1))/o,s=Math.min(h,u);return{columns:o,rows:t,cellHeight:a?s:h,cellWidth:a?s:u}},be=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Se(e){return be.findIndex((function(t){return t.toLowerCase()===e}))}var we=function(e,t){var o=e.getDay()-Se(t);return[0,1,2,3,4,5,6].slice(o)[0]};function We(e){var t=e.startDate,o=e.date,n=e.direction,r=e.firstWeekday,i=function(e){return[P,F,R,T,Y,j,q][Se(e)]}(r),a=i.count(t,o),d=o.getMonth(),l=o.getFullYear(),c=0,h=0;return"horizontal"===n?(c=a,h=we(o,r)):(c=we(o,r),h=a),{currentColumn:c,year:l,currentRow:h,firstWeek:a,month:d,date:o}}var Le=function(e){var t=e.direction,o=e.colorScale,n=e.emptyColor,r=e.from,i=e.to,a=e.data,d=e.cellWidth,l=e.cellHeight,c=e.daySpacing,h=e.offset,u=e.firstWeekday,s=c,f=c;"horizontal"===t?s+=h:f+=h;var g=r||a[0].date,v=i||a[a.length-1].date,m=C(g)?g:new Date(g),y=C(v)?v:new Date(v);return D(m,y).map((function(e){return{date:e,day:pe(e)}})).map((function(e){var r=a.find((function(t){return t.day===e.day})),i=We({startDate:m,date:e.date,direction:t,firstWeekday:u}),h=i.currentColumn,g=i.currentRow,v=i.firstWeek,y=i.year,p=i.month,x=i.date,b={x:s+c*h+d*h,y:f+c*g+l*g};return r?A({},r,{coordinates:b,firstWeek:v,month:p,year:y,date:x,color:o(r.value),width:d,height:l}):A({},e,{coordinates:b,firstWeek:v,month:p,year:y,date:x,color:n,width:d,height:l})}))},ke=function(e){var t=e.cellHeight,o=e.cellWidth,n=e.direction,r=e.daySpacing,i=e.ticks,a=void 0===i?[1,3,5]:i,d=e.firstWeekday,l=e.arrayOfWeekdays,c=void 0===l?function(e,t){if(!e.length||!t)return e;for(var o=0;o<t;o++){var n=e.shift();e.push(n)}return e}(be,Se(d)):l,h=o+r,u=t+r;return a.map((function(e){return{value:c[e],rotation:"horizontal"===n?0:-90,y:"horizontal"===n?u*(e+1)-u/3:0,x:"horizontal"===n?0:h*(e+1)-h/3}}))},Me=function(e){var t=e.direction,o=e.daySpacing,n=e.days,r=e.cellHeight,i=e.cellWidth;return n.reduce((function(e,n){if(e.weeks.length===n.firstWeek||!e.weeks.length&&1===n.firstWeek){e.weeks.push(n);var a=n.year+"-"+n.month;if(Object.keys(e.months).includes(a))"horizontal"===t?e.months[a].bbox.width=(n.firstWeek-e.months[a].firstWeek)*(i+o):e.months[a].bbox.height=(n.firstWeek-e.months[a].firstWeek)*(r+o);else{var d={x:0,y:0,width:0,height:0};"horizontal"===t?(d.x=n.coordinates.x-o,d.height=r+o,d.width=i+2*o):(d.y=n.coordinates.y-o,d.height=r+2*o,d.width=i+2*o),e.months[a]={date:n.date,bbox:d,firstWeek:n.firstWeek,month:0,year:0}}}return e}),{months:{},weeks:[]})},Ce=function(e){var t,o,n=e.from,r=e.to,i=e.data;return t=n?C(n)?n:new Date(n):i[0].date,o=n&&r?C(r)?r:new Date(r):i[i.length-1].date,t.getDay()+E.count(t,o)},ze=f((function(e){var t=e.data,o=e.x,n=e.ry,r=void 0===n?5:n,i=e.rx,a=void 0===i?5:i,d=e.y,l=e.width,c=e.height,h=e.color,u=e.borderWidth,s=e.borderColor,f=e.isInteractive,v=e.tooltip,y=e.onMouseEnter,p=e.onMouseMove,x=e.onMouseLeave,S=e.onClick,w=e.formatValue,L=W(),k=L.showTooltipFromEvent,M=L.hideTooltip,C=g((function(e){if("value"in t){var o=A({},t,{value:w(t.value)});k(m(v,A({},o)),e),null==y||y(t,e)}}),[k,v,t,y,w]),z=g((function(e){if("value"in t){var o=A({},t,{value:w(t.value)});k(m(v,A({},o)),e),null==p||p(t,e)}}),[k,v,t,p,w]),V=g((function(e){"value"in t&&(M(),null==x||x(t,e))}),[M,t,x]),O=g((function(e){return null==S?void 0:S(t,e)}),[t,S]);return b("rect",{x:o,y:d,rx:a,ry:r,width:l,height:c,style:{fill:h,strokeWidth:u,stroke:s},onMouseEnter:f?C:void 0,onMouseMove:f?z:void 0,onMouseLeave:f?V:void 0,onClick:f?O:void 0})})),Ve=["isInteractive","renderWrapper","theme"],Oe=function(e){var t=e.margin,a=e.width,d=e.height,l=e.square,c=void 0===l?te.square:l,u=e.colors,s=void 0===u?te.colors:u,f=e.colorScale,g=e.emptyColor,m=void 0===g?te.emptyColor:g,y=e.from,p=e.to,x=e.data,S=e.direction,W=void 0===S?te.direction:S,L=e.minValue,k=void 0===L?te.minValue:L,M=e.maxValue,C=void 0===M?te.maxValue:M,z=e.valueFormat,V=e.legendFormat,O=e.monthLegend,I=void 0===O?te.monthLegend:O,H=e.monthLegendOffset,D=void 0===H?te.monthLegendOffset:H,B=e.monthLegendPosition,E=void 0===B?te.monthLegendPosition:B,P=e.weekdayLegendOffset,F=void 0===P?te.weekdayLegendOffset:P,R=e.weekdayTicks,T=e.dayBorderColor,Y=void 0===T?te.dayBorderColor:T,j=e.dayBorderWidth,q=void 0===j?te.dayBorderWidth:j,X=e.daySpacing,N=void 0===X?te.daySpacing:X,Z=e.dayRadius,G=void 0===Z?te.dayRadius:Z,K=e.isInteractive,Q=void 0===K?te.isInteractive:K,U=e.tooltip,$=void 0===U?te.tooltip:U,_=e.onClick,ee=e.onMouseEnter,oe=e.onMouseLeave,ne=e.onMouseMove,re=e.legends,ie=void 0===re?te.legends:re,ae=e.role,de=void 0===ae?te.role:ae,le=e.firstWeekday,ce=void 0===le?te.firstWeekday:le,ue=n(a,d,t),fe=ue.margin,ge=ue.innerWidth,ve=ue.innerHeight,me=ue.outerWidth,ye=ue.outerHeight,pe=v((function(){return x.map((function(e){return A({},e,{date:new Date(e.day+"T00:00:00")})})).sort((function(e,t){return e.day.localeCompare(t.day)}))}),[x]),be=o(),Se=he({data:pe,minValue:k,maxValue:C,colors:s,colorScale:f}),we=Ce({from:y,to:p,data:pe}),We=xe({square:c,offset:F,totalDays:we,width:ge,height:ve,daySpacing:N,direction:W}),Ve=We.cellHeight,Oe=We.cellWidth,Ie=Le({offset:F,colorScale:Se,emptyColor:m,cellHeight:Ve,cellWidth:Oe,from:y,to:p,data:pe,direction:W,daySpacing:N,firstWeekday:ce}),He=Object.values(Me({daySpacing:N,direction:W,cellHeight:Ve,cellWidth:Oe,days:Ie}).months),De=ke({direction:W,cellHeight:Ve,cellWidth:Oe,daySpacing:N,ticks:R,firstWeekday:ce}),Be=se({months:He,direction:W,monthLegendPosition:E,monthLegendOffset:D}),Ee=r(z),Pe=r(V);return w(i,{width:me,height:ye,margin:fe,role:de,children:[De.map((function(e){return b("text",{transform:"translate("+e.x+","+e.y+") rotate("+e.rotation+")",textAnchor:"left",style:be.labels.text,children:e.value},e.value)})),Ie.map((function(e){return b(ze,{data:e,x:e.coordinates.x,rx:G,y:e.coordinates.y,ry:G,width:Oe,height:Ve,color:e.color,borderWidth:q,borderColor:Y,onMouseEnter:ee,onMouseLeave:oe,onMouseMove:ne,isInteractive:Q,tooltip:$,onClick:_,formatValue:Ee},e.date.toString())})),b(J,{months:Be,legend:I,theme:be}),ie.map((function(e,t){var o=Se.ticks(e.itemCount).map((function(e){return{id:e,label:Pe(e),color:Se(e)}}));return b(h,A({},e,{containerWidth:a,containerHeight:d,data:o}),t)}))]})},Ie=function(e){var o=e.isInteractive,n=void 0===o?te.isInteractive:o,r=e.renderWrapper,i=e.theme,a=X(e,Ve);return b(t,{isInteractive:n,renderWrapper:r,theme:i,children:b(Oe,A({isInteractive:n},a))})},He=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(Ie,A({width:o,height:n},e))}})},De=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(ye,A({width:o,height:n},e))}})},Be=["months","years"],Ee=["isInteractive","renderWrapper","theme"],Pe=function(e,t,o,n,r,i){var a=l(t,e),d=a[0],h=a[1];return o.find((function(e){return"value"in e&&c(e.x+i.left-r/2,e.y+i.top-r/2,n+r,n+r,d,h)}))},Fe=f((function(e){var t=e.margin,i=e.width,a=e.height,l=e.pixelRatio,c=void 0===l?ee.pixelRatio:l,h=e.align,f=void 0===h?ee.align:h,v=e.colors,m=void 0===v?ee.colors:v,S=e.colorScale,w=e.data,L=e.direction,k=void 0===L?ee.direction:L,M=e.emptyColor,C=void 0===M?ee.emptyColor:M,z=e.from,V=e.to,O=e.minValue,I=void 0===O?ee.minValue:O,H=e.maxValue,D=void 0===H?ee.maxValue:H,B=e.valueFormat,E=e.legendFormat,P=e.yearLegend,F=void 0===P?ee.yearLegend:P,R=e.yearLegendOffset,T=void 0===R?ee.yearLegendOffset:R,Y=e.yearLegendPosition,j=void 0===Y?ee.yearLegendPosition:Y,q=e.yearSpacing,N=void 0===q?ee.yearSpacing:q,Z=e.monthLegend,G=void 0===Z?ee.monthLegend:Z,J=e.monthLegendOffset,K=void 0===J?ee.monthLegendOffset:J,Q=e.monthLegendPosition,U=void 0===Q?ee.monthLegendPosition:Q,$=e.monthSpacing,_=void 0===$?ee.monthSpacing:$,te=e.dayBorderColor,oe=void 0===te?ee.dayBorderColor:te,ne=e.dayBorderWidth,re=void 0===ne?ee.dayBorderWidth:ne,ie=e.daySpacing,ae=void 0===ie?ee.daySpacing:ie,de=e.isInteractive,le=void 0===de?ee.isInteractive:de,ge=e.tooltip,ve=void 0===ge?ee.tooltip:ge,me=e.onClick,ye=e.onMouseEnter,pe=e.onMouseLeave,xe=e.onMouseMove,be=e.legends,Se=void 0===be?ee.legends:be,we=y(null),We=n(i,a,t),Le=We.innerWidth,ke=We.innerHeight,Me=We.outerWidth,Ce=We.outerHeight,ze=We.margin,Ve=ce({width:Le,height:ke,from:z,to:V,direction:k,yearSpacing:N,monthSpacing:_,daySpacing:ae,align:f}),Oe=Ve.months,Ie=Ve.years,He=X(Ve,Be),De=he({data:w,minValue:I,maxValue:D,colors:m,colorScale:S}),Ee=se({months:Oe,direction:k,monthLegendPosition:U,monthLegendOffset:K}),Fe=ue({years:Ie,direction:k,yearLegendPosition:j,yearLegendOffset:T}),Re=fe({days:He.days,data:w,colorScale:De,emptyColor:C}),Te=p(null),Ye=Te[0],je=Te[1],qe=o(),Ae=r(B),Xe=r(E),Ne=W(),Ze=Ne.showTooltipFromEvent,Ge=Ne.hideTooltip;x((function(){var e;if(we.current){we.current.width=Me*c,we.current.height=Ce*c;var t=we.current.getContext("2d");t&&(t.scale(c,c),t.fillStyle=qe.background,t.fillRect(0,0,Me,Ce),t.translate(ze.left,ze.top),Re.forEach((function(e){t.fillStyle=e.color,re>0&&(t.strokeStyle=oe,t.lineWidth=re),t.beginPath(),t.rect(e.x,e.y,e.size,e.size),t.fill(),re>0&&t.stroke()})),t.textAlign="center",t.textBaseline="middle",t.fillStyle=null!=(e=qe.labels.text.fill)?e:"",t.font=qe.labels.text.fontSize+"px "+qe.labels.text.fontFamily,Ee.forEach((function(e){t.save(),t.translate(e.x,e.y),t.rotate(d(e.rotation)),t.fillText(String(G(e.year,e.month,e.date)),0,0),t.restore()})),Fe.forEach((function(e){t.save(),t.translate(e.x,e.y),t.rotate(d(e.rotation)),t.fillText(String(F(e.year)),0,0),t.restore()})),Se.forEach((function(e){var o=De.ticks(e.itemCount).map((function(e){return{id:e,label:Xe(e),color:De(e)}}));u(t,A({},e,{data:o,containerWidth:Le,containerHeight:ke,theme:qe}))})))}}),[we,ke,Le,Me,Ce,c,ze,Re,oe,re,S,F,Fe,G,Ee,Se,qe,Xe,De]);var Je=g((function(e){if(we.current){var t=Pe(e,we.current,Re,Re[0].size,re,ze);if(t){if(je(t),!("value"in t))return;var o=A({},t,{value:Ae(t.value),data:A({},t.data)});Ze(s.createElement(ve,A({},o)),e),!Ye&&(null==ye||ye(t,e)),null==xe||xe(t,e),Ye&&(null==pe||pe(t,e))}else Ge(),t&&(null==pe||pe(t,e))}}),[we,Ye,ze,Re,je,Ae,re,Ze,Ge,ye,xe,pe,ve]),Ke=g((function(){je(null),Ge()}),[je,Ge]),Qe=g((function(e){if(me&&we.current){var t=Pe(e,we.current,Re,Re[0].size,ae,ze);t&&me(t,e)}}),[we,ae,ze,Re,me]);return b("canvas",{ref:we,width:Me*c,height:Ce*c,style:{width:Me,height:Ce},onMouseEnter:le?Je:void 0,onMouseMove:le?Je:void 0,onMouseLeave:le?Ke:void 0,onClick:le?Qe:void 0})})),Re=function(e){var o=e.isInteractive,n=void 0===o?ee.isInteractive:o,r=e.renderWrapper,i=e.theme,a=X(e,Ee);return b(t,{isInteractive:n,renderWrapper:r,theme:i,children:b(Fe,A({isInteractive:n},a))})},Te=function(e){return b(a,{children:function(t){var o=t.width,n=t.height;return b(Re,A({width:o,height:n},e))}})};export{be as ARRAY_OF_WEEKDAYS,ye as Calendar,Re as CalendarCanvas,De as ResponsiveCalendar,Te as ResponsiveCalendarCanvas,He as ResponsiveTimeRange,Ie as TimeRange,ae as bindDaysData,ee as calendarCanvasDefaultProps,_ as calendarDefaultProps,Le as computeCellPositions,xe as computeCellSize,oe as computeDomain,ie as computeLayout,le as computeMonthLegendPositions,Me as computeMonthLegends,Ce as computeTotalDays,ke as computeWeekdays,de as computeYearLegendPositions,we as getDayIndex,Se as getFirstWeekdayIndex,te as timeRangeDefaultProps,ce as useCalendarLayout,he as useColorScale,fe as useDays,se as useMonthLegends,ue as useYearLegends};
//# sourceMappingURL=nivo-calendar.es.js.map
