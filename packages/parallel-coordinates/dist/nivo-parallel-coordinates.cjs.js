"use strict";var e=require("@nivo/tooltip"),i=require("react/jsx-runtime"),t=require("react"),r=require("@nivo/core"),a=require("@nivo/axes"),n=require("@nivo/legends"),o=require("d3-shape"),l=require("d3-scale"),s=require("@nivo/colors"),u=require("@nivo/scales"),d=require("@react-spring/web");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},c.apply(this,arguments)}function v(e,i){if(null==e)return{};var t,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)t=n[r],i.indexOf(t)>=0||(a[t]=e[t]);return a}function h(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,r=new Array(i);t<i;t++)r[t]=e[t];return r}function p(e,i){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,i){if(e){if("string"==typeof e)return h(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?h(e,i):void 0}}(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g={layout:"horizontal",curve:"linear",role:"img",colors:{scheme:"category10"},lineWidth:2,lineOpacity:.5,axesTicksPosition:"after",isInteractive:!0,tooltip:function(t){var r=t.datum,a=t.variables;return i.jsx(e.TableTooltip,{rows:a.map((function(e){return[e.label||e.id,i.jsx("strong",{children:r.data[e.value]})]}))})},legends:[],animate:!0,motionConfig:"gentle"},m=c({},g,{layers:["lines","axes","legends"]}),y=c({},g,{layers:["lines","axes","legends"],pixelRatio:"undefined"!=typeof window&&null!=(f=window.devicePixelRatio)?f:1}),x=function(e){var i=e.width,a=e.height,n=e.data,d=e.variables,v=e.groupBy,h=e.groups,f=e.layout,m=void 0===f?g.layout:f,y=e.curve,x=void 0===y?g.curve:y,b=e.colors,C=void 0===b?g.colors:b,w=e.forwardLegendData,P=s.useOrdinalColorScale(C,"id"),W=t.useMemo((function(){if(void 0!==v)return function(e){var i,t=e.data,r=e.groupBy,a=e.predefinedGroups,n=e.getColor;if(void 0!==a)i=a.map((function(e){return{id:e.id,label:e.label||e.id,color:n(e)}}));else{for(var o,l=new Set,s=p(t);!(o=s()).done;){var u=o.value;l.add(u[r])}i=Array.from(l,(function(e){var i={id:e,label:e};return c({},i,{color:n(i)})}))}return i}({data:n,groupBy:v,predefinedGroups:h,getColor:P})}),[n,v,h,P]),j=t.useMemo((function(){var e=d.map((function(e){return e.id}));return u.castPointScale(l.scalePoint().range("horizontal"===m?[0,i]:[a,0]).domain(e))}),[d,m,i,a]),S=t.useMemo((function(){return function(e){var i=e.width,t=e.height,r=e.data,a=e.variables,n="horizontal"===e.layout?[t,0]:[0,i];return a.map((function(e){var i=r.map((function(i){return i[e.value]})),t=void 0!==e.min&&"auto"!==e.min?e.min:Math.min.apply(Math,i),a=void 0!==e.max&&"auto"!==e.max?e.max:Math.max.apply(Math,i),o=u.castLinearScale(l.scaleLinear().rangeRound(n).domain([t,a]));return c({},e,{scale:o})}))}({width:i,height:a,data:n,variables:d,layout:m})}),[i,a,n,d,m]),k=t.useMemo((function(){return function(e){var i=e.data,t=e.groupBy,r=e.groups,a=e.variablesScale,n=e.variablesWithScale,o=e.layout,l=e.getColor;return i.map((function(e,i){var s=n.map((function(i){return["horizontal"===o?a(i.id):i.scale(e[i.value]),"horizontal"===o?i.scale(e[i.value]):a(i.id)]})),u=void 0;if(void 0!==t){var d=e[t];u=null==r?void 0:r.find((function(e){return e.id===d}))}var v={id:e.id,index:i,points:s,data:e,color:u?u.color:l(e)};return u?c({},v,{group:u}):v}))}({data:n,groupBy:v,groups:W,variablesScale:j,variablesWithScale:S,layout:m,getColor:P})}),[n,v,W,j,S,m,P]),D=t.useMemo((function(){return W?W.map((function(e){return{id:e.id,label:e.label||e.id,color:e.color,data:e}})):k.map((function(e){return{id:e.id,label:e.id,color:e.color,data:e}}))}),[W,k]),L=t.useRef(w);t.useEffect((function(){"function"==typeof L.current&&L.current(D)}),[L,D]);var I=t.useMemo((function(){return o.line().curve(r.curveFromProp(x))}),[x]),M=t.useMemo((function(){return{computedData:k,variables:d,lineGenerator:I}}),[k,d,I]);return{variablesScale:j,variablesWithScale:S,computedData:k,lineGenerator:I,legendData:D,customLayerContext:M}},b=function(a){var n=a.datum,o=a.variables,l=a.lineGenerator,s=a.lineWidth,u=a.opacity,c=a.tooltip,v=a.testIdPrefix,h=e.useTooltip(),p=h.showTooltipFromEvent,f=h.hideTooltip,g=t.useCallback((function(e){p(t.createElement(c,{datum:n,variables:o}),e)}),[p,n,o]),m=r.useMotionConfig(),y=m.animate,x=m.config,b=r.useAnimatedPath(l(n.points)),C=d.useSpring({color:n.color,opacity:u,config:x,immediate:!y});return i.jsx(d.animated.path,{d:b,stroke:C.color,strokeWidth:s,strokeLinecap:"round",opacity:C.opacity,fill:"none",onMouseEnter:g,onMouseMove:g,onMouseLeave:f,"data-test-id":v?v+".line_"+n.id:void 0})},C=["isInteractive","animate","motionConfig","theme","renderWrapper"],w=function(e){var o=e.data,l=e.variables,s=e.groupBy,u=e.groups,d=e.width,v=e.height,h=e.margin,p=e.layout,f=void 0===p?m.layout:p,g=e.curve,y=void 0===g?m.curve:g,C=e.axesTicksPosition,w=e.lineWidth,P=void 0===w?m.lineWidth:w,W=e.lineOpacity,j=void 0===W?m.lineOpacity:W,S=e.colors,k=void 0===S?m.colors:S,D=e.layers,L=void 0===D?m.layers:D,I=e.tooltip,M=void 0===I?m.tooltip:I,B=e.legends,O=void 0===B?m.legends:B,z=e.forwardLegendData,R=e.role,T=void 0===R?m.role:R,q=e.ariaLabel,A=e.ariaLabelledBy,E=e.ariaDescribedBy,G=e.testIdPrefix,H=r.useDimensions(d,v,h),F=H.outerWidth,V=H.outerHeight,U=H.margin,$=H.innerWidth,_=H.innerHeight,J=x({width:$,height:_,data:o,variables:l,groupBy:s,groups:u,layout:f,colors:k,curve:y,forwardLegendData:z}),K=J.variablesScale,N=J.variablesWithScale,Q=J.computedData,X=J.lineGenerator,Y=J.legendData,Z=J.customLayerContext,ee={axes:null,lines:null,legends:null};return L.includes("axes")&&(ee.axes=i.jsx("g",{children:N.map((function(e){return i.jsx(a.Axis,{axis:"horizontal"===f?"y":"x",length:"horizontal"===f?_:$,x:"horizontal"===f?K(e.id):0,y:"horizontal"===f?0:K(e.id),scale:e.scale,ticksPosition:e.ticksPosition||C,tickValues:e.tickValues,tickSize:e.tickSize,tickPadding:e.tickPadding,tickRotation:e.tickRotation,format:e.tickFormat,legend:e.label||e.id,legendPosition:e.legendPosition,legendOffset:e.legendOffset},e.id)}))},"axes")),L.includes("lines")&&(ee.lines=i.jsx("g",{children:Q.map((function(e){return i.jsx(b,{datum:e,variables:l,lineGenerator:X,lineWidth:P,opacity:j,tooltip:M,testIdPrefix:G},""+("group"in e?e.group.id:"")+e.id)}))},"lines")),L.includes("legends")&&(ee.legends=i.jsx("g",{children:O.map((function(e,t){return i.jsx(n.BoxLegendSvg,c({},e,{containerWidth:$,containerHeight:_,data:Y}),t)}))},"legends")),i.jsx(r.SvgWrapper,{width:F,height:V,margin:U,role:T,ariaLabel:q,ariaLabelledBy:A,ariaDescribedBy:E,children:L.map((function(e,r){var a;return"function"==typeof e?i.jsx(t.Fragment,{children:t.createElement(e,Z)},r):null!=(a=null==ee?void 0:ee[e])?a:null}))})},P=function(e){var t=e.isInteractive,a=void 0===t?m.isInteractive:t,n=e.animate,o=void 0===n?m.animate:n,l=e.motionConfig,s=void 0===l?m.motionConfig:l,u=e.theme,d=e.renderWrapper,h=v(e,C);return i.jsx(r.Container,{animate:o,isInteractive:a,motionConfig:s,renderWrapper:d,theme:u,children:i.jsx(w,c({isInteractive:a},h))})},W=["theme","isInteractive","animate","motionConfig","renderWrapper"],j=function(e){var o=e.data,l=e.layout,s=void 0===l?y.layout:l,u=e.variables,d=e.groupBy,v=e.groups,h=e.width,p=e.height,f=e.margin,g=e.curve,m=void 0===g?y.curve:g,b=e.colors,C=void 0===b?y.colors:b,w=e.lineOpacity,P=void 0===w?y.lineOpacity:w,W=e.lineWidth,j=void 0===W?y.lineWidth:W,S=e.axesTicksPosition,k=void 0===S?y.axesTicksPosition:S,D=e.legends,L=void 0===D?y.legends:D,I=e.forwardLegendData,M=e.layers,B=void 0===M?y.layers:M,O=e.role,z=void 0===O?y.role:O,R=e.ariaLabel,T=e.ariaLabelledBy,q=e.ariaDescribedBy,A=e.pixelRatio,E=void 0===A?y.pixelRatio:A,G=t.useRef(null),H=r.useDimensions(h,p,f),F=H.margin,V=H.innerWidth,U=H.innerHeight,$=H.outerWidth,_=H.outerHeight,J=x({width:V,height:U,data:o,variables:u,groupBy:d,groups:v,layout:s,colors:C,curve:m,forwardLegendData:I}),K=J.variablesScale,N=J.variablesWithScale,Q=J.computedData,X=J.lineGenerator,Y=J.legendData,Z=J.customLayerContext,ee=r.useTheme();return t.useEffect((function(){if(null!==G.current){var e=G.current.getContext("2d");null!==e&&(G.current.width=$*E,G.current.height=_*E,e.scale(E,E),e.fillStyle=ee.background,e.fillRect(0,0,$,_),e.translate(F.left,F.top),B.forEach((function(i){"axes"===i?N.forEach((function(i){a.renderAxisToCanvas(e,{axis:"horizontal"===s?"y":"x",scale:i.scale,x:"horizontal"===s?K(i.id):0,y:"horizontal"===s?0:K(i.id),length:"horizontal"===s?U:V,ticksPosition:k,theme:ee})})):"lines"===i?(X.context(e),Q.forEach((function(i){e.save(),e.globalAlpha=P,e.beginPath(),X(i.points),e.strokeStyle=i.color,e.lineWidth=j,e.stroke(),e.restore()}))):"legends"===i?L.forEach((function(i){n.renderLegendToCanvas(e,c({},i,{data:Y,containerWidth:V,containerHeight:U,theme:ee}))})):"function"==typeof i&&i(e,Z)})))}}),[G,$,_,V,U,F,B,Z,X,P,j,Q,K,N,s,k,L,Y,ee,E]),i.jsx("canvas",{ref:G,width:$*E,height:_*E,style:{width:$,height:_},role:z,"aria-label":R,"aria-labelledby":T,"aria-describedby":q})},S=function(e){var t=e.theme,a=e.isInteractive,n=void 0===a?y.isInteractive:a,o=e.animate,l=void 0===o?y.animate:o,s=e.motionConfig,u=void 0===s?y.motionConfig:s,d=e.renderWrapper,h=v(e,W);return i.jsx(r.Container,{isInteractive:n,animate:l,motionConfig:u,theme:t,renderWrapper:d,children:i.jsx(j,c({isInteractive:n},h))})};exports.InnerParallelCoordinatesCanvas=j,exports.ParallelCoordinates=P,exports.ParallelCoordinatesCanvas=S,exports.ResponsiveParallelCoordinates=function(e){return i.jsx(r.ResponsiveWrapper,{children:function(t){var r=t.width,a=t.height;return i.jsx(P,c({width:r,height:a},e))}})},exports.ResponsiveParallelCoordinatesCanvas=function(e){return i.jsx(r.ResponsiveWrapper,{children:function(t){var r=t.width,a=t.height;return i.jsx(S,c({width:r,height:a},e))}})},exports.canvasDefaultProps=y,exports.commonDefaultProps=g,exports.svgDefaultProps=m;
//# sourceMappingURL=nivo-parallel-coordinates.cjs.js.map
