"use strict";var e=require("react"),n=require("@nivo/core"),o=require("@nivo/axes"),i=require("@nivo/legends"),t=require("@nivo/colors"),r=require("@nivo/scales"),a=require("@nivo/annotations"),s=require("lodash/get"),l=require("lodash/isString"),d=require("lodash/isNumber"),u=require("lodash/isPlainObject"),c=require("d3-scale"),v=require("@react-spring/web"),h=require("react/jsx-runtime"),f=require("@nivo/tooltip"),m=require("@nivo/voronoi");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},g.apply(this,arguments)}function x(e,n){if(null==e)return{};var o,i,t={},r=Object.keys(e);for(i=0;i<r.length;i++)o=r[i],n.indexOf(o)>=0||(t[o]=e[o]);return t}var p=function(e){if("function"==typeof e)return e;if(d(e))return function(){return e};if(function(e){return u(e)}(e)){if(!l(e.key))throw new Error("symbolSize is invalid, key should be a string pointing to the property to use to determine node size");if(!Array.isArray(e.values)||2!==e.values.length)throw new Error("symbolSize is invalid, values spec should be an array containing two values, min and max");if(!Array.isArray(e.sizes)||2!==e.sizes.length)throw new Error("symbolSize is invalid, sizes spec should be an array containing two values, min and max");var n=c.scaleLinear().domain([e.values[0],e.values[1]]).range([e.sizes[0],e.sizes[1]]);return function(o){return n(s(o,e.key))}}throw new Error("nodeSize is invalid, it should be either a function, a number or an object")},y=function(o){var i,a=o.data,s=o.xScaleSpec,l=o.xFormat,d=o.yScaleSpec,u=o.yFormat,c=o.width,v=o.height,h=o.nodeId,f=o.nodeSize,m=o.colors,x=e.useMemo((function(){return r.computeXYScalesForSeries(a,s,d,c,v)}),[a,s,d,c,v]),y=x.series,M=x.xScale,b=x.yScale,S=n.useValueFormatter(l),C=n.useValueFormatter(u),w=n.usePropertyAccessor(h),k=e.useMemo((function(){return function(e){var n=e.series,o=e.formatX,i=e.formatY,t=e.getNodeId,r=[];return n.forEach((function(e){e.data.forEach((function(n,a){var s={index:r.length,serieIndex:a,serieId:e.id,x:n.position.x,xValue:n.data.x,formattedX:o(n.data.x),y:n.position.y,yValue:n.data.y,formattedY:i(n.data.y),data:n.data};r.push(g({},s,{id:t(s)}))}))})),r}({series:y,formatX:S,formatY:C,getNodeId:w})}),[y,S,C,w]),I=(i=f,e.useMemo((function(){return p(i)}),[i])),E=t.useOrdinalColorScale(m,"serieId");return{xScale:M,yScale:b,nodes:e.useMemo((function(){return k.map((function(e){return g({},e,{size:I(e),color:E({serieId:e.serieId})})}))}),[k,I,E]),legendData:e.useMemo((function(){return y.map((function(e){return{id:e.id,label:e.id,color:E({serieId:e.id})}}))}),[y,E])}},M=function(e,n){return a.useAnnotations({data:e,annotations:n,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){return{size:e.size,width:e.size,height:e.size}}})},b=function(e){return e/2},S={xScale:{type:"linear",min:0,max:"auto"},yScale:{type:"linear",min:0,max:"auto"},enableGridX:!0,enableGridY:!0,axisBottom:{},axisLeft:{},nodeId:function(e){return e.serieId+"."+e.index},nodeSize:9,nodeComponent:function(n){var o=n.node,i=n.style,t=n.blendMode,r=n.isInteractive,a=n.onMouseEnter,s=n.onMouseMove,l=n.onMouseLeave,d=n.onClick,u=e.useCallback((function(e){return null==a?void 0:a(o,e)}),[o,a]),c=e.useCallback((function(e){return null==s?void 0:s(o,e)}),[o,s]),f=e.useCallback((function(e){return null==l?void 0:l(o,e)}),[o,l]),m=e.useCallback((function(e){return null==d?void 0:d(o,e)}),[o,d]);return h.jsx(v.animated.circle,{cx:i.x,cy:i.y,r:i.size.to(b),fill:i.color,style:{mixBlendMode:t},onMouseEnter:r?u:void 0,onMouseMove:r?c:void 0,onMouseLeave:r?f:void 0,onClick:r?m:void 0})},colors:{scheme:"nivo"},isInteractive:!0,debugMesh:!1,tooltip:function(e){var n=e.node;return h.jsx(f.BasicTooltip,{id:n.serieId,value:"x: "+n.formattedX+", y: "+n.formattedY,enableChip:!0,color:n.color})},markers:[],legends:[],annotations:[]},C=g({},S,{blendMode:"normal",layers:["grid","axes","nodes","markers","mesh","legends","annotations"],role:"img",useMesh:!0,animate:!0,motionConfig:"default"}),w=g({},S,{layers:["grid","axes","nodes","mesh","legends","annotations"],pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,renderNode:function(e,n){e.beginPath(),e.arc(n.x,n.y,n.size/2,0,2*Math.PI),e.fillStyle=n.color,e.fill()}}),k=function(e){var n=e.nodes,o=e.annotations,i=M(n,o);return h.jsx(h.Fragment,{children:i.map((function(e,n){return h.jsx(a.Annotation,g({},e),n)}))})},I=function(e){return e.id},E=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},j=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},z=function(o){var i=o.nodes,t=o.nodeComponent,r=o.isInteractive,a=o.onMouseEnter,s=o.onMouseMove,l=o.onMouseLeave,d=o.onClick,u=o.tooltip,c=o.blendMode,m=n.useMotionConfig(),g=m.animate,x=m.config,p=v.useTransition(i,{keys:I,from:E,enter:E,update:E,leave:j,config:x,immediate:!g}),y=f.useTooltip(),M=y.showTooltipFromEvent,b=y.hideTooltip,S=e.useCallback((function(n,o){M(e.createElement(u,{node:n}),o),null==a||a(n,o)}),[u,M,a]),C=e.useCallback((function(n,o){M(e.createElement(u,{node:n}),o),null==s||s(n,o)}),[u,M,s]),w=e.useCallback((function(e,n){b(),null==l||l(e,n)}),[b,l]),k=e.useCallback((function(e,n){return null==d?void 0:d(e,n)}),[d]);return h.jsx(h.Fragment,{children:p((function(n,o){return e.createElement(t,{node:o,style:n,blendMode:c,isInteractive:r,onMouseEnter:r?S:void 0,onMouseMove:r?C:void 0,onMouseLeave:r?w:void 0,onClick:r?k:void 0})}))})},L=function(n){var o=n.nodes,i=n.width,t=n.height,r=n.onMouseEnter,a=n.onMouseMove,s=n.onMouseLeave,l=n.onClick,d=n.tooltip,u=n.debug,c=f.useTooltip(),v=c.showTooltipFromEvent,g=c.hideTooltip,x=e.useCallback((function(n,o){v(e.createElement(d,{node:n}),o),r&&r(n,o)}),[v,d,r]),p=e.useCallback((function(n,o){v(e.createElement(d,{node:n}),o),a&&a(n,o)}),[v,d,a]),y=e.useCallback((function(e,n){g(),s&&s(e,n)}),[g,s]),M=e.useCallback((function(e,n){l&&l(e,n)}),[l]);return h.jsx(m.Mesh,{nodes:o,width:i,height:t,onMouseEnter:x,onMouseMove:p,onMouseLeave:y,onClick:M,debug:u})},T=["isInteractive","animate","motionConfig","theme","renderWrapper"],W=function(t){var r=t.data,a=t.xScale,s=void 0===a?C.xScale:a,l=t.xFormat,d=t.yScale,u=void 0===d?C.yScale:d,c=t.yFormat,v=t.width,f=t.height,m=t.margin,x=t.layers,p=void 0===x?C.layers:x,M=t.colors,b=void 0===M?C.colors:M,S=t.blendMode,w=void 0===S?C.blendMode:S,I=t.nodeId,E=void 0===I?C.nodeId:I,j=t.nodeSize,T=void 0===j?C.nodeSize:j,W=t.nodeComponent,F=void 0===W?C.nodeComponent:W,R=t.enableGridX,q=void 0===R?C.enableGridX:R,P=t.enableGridY,G=void 0===P?C.enableGridY:P,V=t.gridXValues,B=t.gridYValues,X=t.axisTop,Y=t.axisRight,A=t.axisBottom,D=void 0===A?C.axisBottom:A,H=t.axisLeft,O=void 0===H?C.axisLeft:H,N=t.annotations,U=void 0===N?C.annotations:N,J=t.isInteractive,K=void 0===J?C.isInteractive:J,Q=t.useMesh,Z=void 0===Q?C.useMesh:Q,$=t.debugMesh,_=void 0===$?C.debugMesh:$,ee=t.onMouseEnter,ne=t.onMouseMove,oe=t.onMouseLeave,ie=t.onClick,te=t.tooltip,re=void 0===te?C.tooltip:te,ae=t.markers,se=void 0===ae?C.markers:ae,le=t.legends,de=void 0===le?C.legends:le,ue=t.role,ce=void 0===ue?C.role:ue,ve=t.ariaLabel,he=t.ariaLabelledBy,fe=t.ariaDescribedBy,me=n.useDimensions(v,f,m),ge=me.margin,xe=me.innerWidth,pe=me.innerHeight,ye=me.outerWidth,Me=me.outerHeight,be=y({data:r,xScaleSpec:s,xFormat:l,yScaleSpec:u,yFormat:c,width:xe,height:pe,nodeId:E,nodeSize:T,colors:b}),Se=be.xScale,Ce=be.yScale,we=be.nodes,ke=be.legendData,Ie=e.useMemo((function(){return{xScale:Se,yScale:Ce,nodes:we,margin:ge,innerWidth:xe,innerHeight:pe,outerWidth:ye,outerHeight:Me}}),[Se,Ce,we,ge,xe,pe,ye,Me]),Ee={grid:null,axes:null,nodes:null,markers:null,mesh:null,annotations:null,legends:null};return p.includes("grid")&&(Ee.grid=h.jsx(o.Grid,{width:xe,height:pe,xScale:q?Se:null,yScale:G?Ce:null,xValues:V,yValues:B},"grid")),p.includes("axes")&&(Ee.axes=h.jsx(o.Axes,{xScale:Se,yScale:Ce,width:xe,height:pe,top:X,right:Y,bottom:D,left:O},"axes")),p.includes("nodes")&&(Ee.nodes=h.jsx(z,{nodes:we,nodeComponent:F,isInteractive:K,tooltip:re,blendMode:w,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:oe,onClick:ie},"nodes")),p.includes("markers")&&(Ee.markers=h.jsx(n.CartesianMarkers,{markers:se,width:xe,height:pe,xScale:Se,yScale:Ce},"markers")),p.includes("mesh")&&K&&Z&&(Ee.mesh=h.jsx(L,{nodes:we,width:xe,height:pe,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:oe,onClick:ie,tooltip:re,debug:_},"mesh")),p.includes("annotations")&&(Ee.annotations=h.jsx(k,{nodes:we,annotations:U},"annotations")),p.includes("legends")&&(Ee.legends=de.map((function(e,n){return h.jsx(i.BoxLegendSvg,g({},e,{containerWidth:xe,containerHeight:pe,data:ke}),n)}))),h.jsx(n.SvgWrapper,{width:ye,height:Me,margin:ge,role:ce,ariaLabel:ve,ariaLabelledBy:he,ariaDescribedBy:fe,children:p.map((function(n,o){if("string"==typeof n&&void 0!==Ee[n])return Ee[n];if("function"==typeof n)return h.jsx(e.Fragment,{children:e.createElement(n,Ie)},o);throw new Error("Unknown layer ("+n+")")}))})},F=function(e){var o=e.isInteractive,i=void 0===o?C.isInteractive:o,t=e.animate,r=void 0===t?C.animate:t,a=e.motionConfig,s=void 0===a?C.motionConfig:a,l=e.theme,d=e.renderWrapper,u=x(e,T);return h.jsx(n.Container,{animate:r,isInteractive:i,motionConfig:s,renderWrapper:d,theme:l,children:h.jsx(W,g({isInteractive:i},u))})},R=["isInteractive","renderWrapper","theme"],q=function(t){var r=t.data,s=t.xScale,l=void 0===s?w.xScale:s,d=t.xFormat,u=t.yScale,c=void 0===u?w.yScale:u,v=t.yFormat,x=t.width,p=t.height,b=t.margin,S=t.pixelRatio,k=void 0===S?w.pixelRatio:S,I=t.layers,E=void 0===I?w.layers:I,j=t.colors,z=void 0===j?w.colors:j,L=t.nodeId,T=void 0===L?C.nodeId:L,W=t.nodeSize,F=void 0===W?w.nodeSize:W,R=t.renderNode,q=void 0===R?w.renderNode:R,P=t.enableGridX,G=void 0===P?w.enableGridX:P,V=t.gridXValues,B=t.enableGridY,X=void 0===B?w.enableGridY:B,Y=t.gridYValues,A=t.axisTop,D=t.axisRight,H=t.axisBottom,O=void 0===H?w.axisBottom:H,N=t.axisLeft,U=void 0===N?w.axisLeft:N,J=t.annotations,K=void 0===J?w.annotations:J,Q=t.isInteractive,Z=void 0===Q?w.isInteractive:Q,$=t.debugMesh,_=void 0===$?w.debugMesh:$,ee=t.onMouseEnter,ne=t.onMouseMove,oe=t.onMouseLeave,ie=t.onClick,te=t.tooltip,re=void 0===te?w.tooltip:te,ae=t.legends,se=void 0===ae?w.legends:ae,le=t.canvasRef,de=e.useRef(null),ue=n.useTheme(),ce=e.useState(null),ve=ce[0],he=ce[1],fe=n.useDimensions(x,p,b),me=fe.margin,ge=fe.innerWidth,xe=fe.innerHeight,pe=fe.outerWidth,ye=fe.outerHeight,Me=y({data:r,xScaleSpec:l,xFormat:d,yScaleSpec:c,yFormat:v,width:ge,height:xe,nodeId:T,nodeSize:F,colors:z}),be=Me.xScale,Se=Me.yScale,Ce=Me.nodes,we=Me.legendData,ke=M(Ce,K),Ie=m.useVoronoiMesh({points:Ce,width:ge,height:xe,debug:_}),Ee=Ie.delaunay,je=Ie.voronoi,ze=e.useMemo((function(){return{xScale:be,yScale:Se,nodes:Ce,margin:me,innerWidth:ge,innerHeight:xe,outerWidth:pe,outerHeight:ye}}),[be,Se,Ce,me,ge,xe,pe,ye]);e.useEffect((function(){if(de.current){de.current.width=pe*k,de.current.height=ye*k;var e=de.current.getContext("2d");e.scale(k,k),e.fillStyle=ue.background,e.fillRect(0,0,pe,ye),e.translate(me.left,me.top),E.forEach((function(n){if("grid"===n)e.lineWidth=ue.grid.line.strokeWidth,e.strokeStyle=ue.grid.line.stroke,G&&o.renderGridLinesToCanvas(e,{width:ge,height:xe,scale:be,axis:"x",values:V}),X&&o.renderGridLinesToCanvas(e,{width:ge,height:xe,scale:Se,axis:"y",values:Y});else if("annotations"===n)a.renderAnnotationsToCanvas(e,{annotations:ke,theme:ue});else if("axes"===n)o.renderAxesToCanvas(e,{xScale:be,yScale:Se,width:ge,height:xe,top:A,right:D,bottom:O,left:U,theme:ue});else if("nodes"===n)Ce.forEach((function(n){q(e,n)}));else if("mesh"===n)_&&(m.renderVoronoiToCanvas(e,je),ve&&m.renderVoronoiCellToCanvas(e,je,ve.index));else if("legends"===n)se.forEach((function(n){i.renderLegendToCanvas(e,g({},n,{data:we,containerWidth:ge,containerHeight:xe,theme:ue}))}));else{if("function"!=typeof n)throw new Error("Invalid layer: "+n);n(e,ze)}}))}}),[de,ge,xe,pe,ye,me.top,me.left,k,q,E,ze,ue,be,Se,Ce,G,X,A,D,O,U,se,we,_,je,ve,ke]);var Le=f.useTooltip(),Te=Le.showTooltipFromEvent,We=Le.hideTooltip,Fe=e.useCallback((function(e){var o=n.getRelativeCursor(de.current,e),i=o[0],t=o[1];if(!n.isCursorInRect(me.left,me.top,ge,xe,i,t))return null;var r=Ee.find(i-me.left,t-me.top);return Ce[r]}),[de,me,ge,xe,Ee]),Re=e.useCallback((function(n){var o=Fe(n);he(o),o?(Te(e.createElement(re,{node:o}),n),ve&&ve.id!==o.id&&(oe&&oe(ve,n),ee&&ee(o,n)),ve||ee&&ee(o,n),ne&&ne(o,n)):(We(),ve&&oe&&oe(ve,n))}),[Fe,ve,he,Te,We,re,ee,ne,oe]),qe=e.useCallback((function(e){We(),he(null),ve&&oe&&oe(ve,e)}),[We,ve,he,oe]),Pe=e.useCallback((function(e){if(ie){var n=Fe(e);n&&ie(n,e)}}),[Fe,ie]);return h.jsx("canvas",{ref:function(e){de.current=e,le&&"current"in le&&(le.current=e)},width:pe*k,height:ye*k,style:{width:pe,height:ye,cursor:Z?"auto":"normal"},onMouseEnter:Z?Re:void 0,onMouseMove:Z?Re:void 0,onMouseLeave:Z?qe:void 0,onClick:Z?Pe:void 0})},P=e.forwardRef((function(e,o){var i=e.isInteractive,t=e.renderWrapper,r=e.theme,a=x(e,R);return h.jsx(n.Container,{isInteractive:i,renderWrapper:t,theme:r,animate:!1,children:h.jsx(q,g({},a,{canvasRef:o}))})})),G=e.forwardRef((function(e,o){return h.jsx(n.ResponsiveWrapper,{children:function(n){var i=n.width,t=n.height;return h.jsx(P,g({width:i,height:t},e,{ref:o}))}})}));exports.ResponsiveScatterPlot=function(e){return h.jsx(n.ResponsiveWrapper,{children:function(n){var o=n.width,i=n.height;return h.jsx(F,g({width:o,height:i},e))}})},exports.ResponsiveScatterPlotCanvas=G,exports.ScatterPlot=F,exports.ScatterPlotCanvas=P,exports.canvasDefaultProps=w,exports.commonDefaultProps=S,exports.svgDefaultProps=C,exports.useScatterPlot=y,exports.useScatterPlotAnnotations=M;
//# sourceMappingURL=nivo-scatterplot.cjs.js.map
