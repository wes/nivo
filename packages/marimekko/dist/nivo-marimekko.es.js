import{useMemo as i,useCallback as n,createElement as e,Fragment as o}from"react";import{useValueFormatter as t,useTheme as r,useMotionConfig as a,Container as d,useDimensions as u,bindDefs as l,SvgWrapper as c,ResponsiveWrapper as s}from"@nivo/core";import{Grid as h,Axes as f}from"@nivo/axes";import{BoxLegendSvg as v}from"@nivo/legends";import m from"lodash/get";import{stackOffsetExpand as g,stackOffsetDiverging as p,stackOffsetNone as y,stackOffsetSilhouette as b,stackOffsetWiggle as x,stack as M}from"d3-shape";import{useOrdinalColorScale as w,useInheritedColor as C}from"@nivo/colors";import{createLinearScale as k}from"@nivo/scales";import{animated as P,to as I,useTransition as S}from"@react-spring/web";import{useTooltip as E,BasicTooltip as W}from"@nivo/tooltip";import{jsx as F,Fragment as L}from"react/jsx-runtime";function G(){return G=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o])}return i},G.apply(this,arguments)}var O={layout:"vertical",offset:"none",outerPadding:0,innerPadding:3,layers:["grid","axes","bars","legends"],enableGridX:!1,enableGridY:!0,colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,animate:!0,motionConfig:"gentle"},V={expand:g,diverging:p,none:y,silouhette:b,wiggle:x},j=function(n,e,o){return i((function(){var i=V[o];return M().keys(n).value((function(i,n){return e[n](i)})).offset(i)}),[n,e,o])},X=function(n){var e=n.data,o=n.id,a=n.value,d=n.valueFormat,u=n.dimensions,l=n.layout,c=n.offset,s=n.outerPadding,h=n.innerPadding,f=n.colors,v=n.borderColor,g=n.borderWidth,p=n.width,y=n.height,b=function(n){return i((function(){var i={},e=[];return n.forEach((function(n){e.push(n.id),i[n.id]="function"==typeof n.value?n.value:function(i){return m(i,n.value,0)}})),{dimensionIds:e,dimensions:i}}),[n])}(u),x=b.dimensionIds,M=b.dimensions,P=function(n,e){return i((function(){var i=n(e),o=[];return i.forEach((function(i){i.forEach((function(i){o.push(i[0]),o.push(i[1])}))})),{stacked:i,min:Math.min.apply(Math,o),max:Math.max.apply(Math,o)}}),[n,e])}(j(x,M,c),e),I=P.stacked,S=P.min,E=P.max,W=function(n,e,o){var t="function"==typeof e?e:function(i){return m(i,e)},r="function"==typeof o?o:function(i){return m(i,o,0)};return i((function(){var i=[];return n.forEach((function(n,e){var o=t(n),a=r(n);i.push({index:e,id:o,value:a,data:n})})),i}),[n,t,r])}(e,o,a),F=function(n){var e=n.data,o=n.width,t=n.height,r=n.layout,a=n.outerPadding,d=n.innerPadding;return i((function(){var i=e.reduce((function(i,n){return i+n.value}),0),n={all:[0,i],min:0,max:i},u=2*a+(e.length-1)*d;return k({type:"linear"},n,"vertical"===r?o-u:t-u,"x")}),[e,o,t,r])}({data:W,width:p,height:y,layout:l,outerPadding:s,innerPadding:h}),L=function(n,e,o,t,r){return i((function(){return k({type:"linear",min:n,max:e},{all:[n,e],min:n,max:e},"vertical"===r?t:o,"vertical"===r?"y":"x")}),[n,e,o,t,r])}(S,E,p,y,l),O=function(n){var e=n.data,o=n.stacked,r=n.dimensionIds,a=n.valueFormat,d=n.thicknessScale,u=n.dimensionsScale,l=n.colors,c=n.layout,s=n.outerPadding,h=n.innerPadding,f=w(l,"id"),v=t(a);return i((function(){var i=[],n=s;return e.forEach((function(e){var t=d(e.value),a=G({},e,{x:"vertical"===c?n:0,y:"vertical"===c?0:n,width:"vertical"===c?t:0,height:"vertical"===c?0:t,dimensions:[]}),l=[],s=0;n+=t+h,r.forEach((function(i){var n=o.find((function(n){return n.key===i}));if(n){var t=n[e.index],r={id:i,datum:a,value:t[1]-t[0],formattedValue:v(t[1]-t[0]),color:"rgba(0, 0, 0, 0)",x:0,y:0,width:0,height:0},d=u(t[0]),h=u(t[1]);"vertical"===c?(r.x=a.x,r.y=Math.min(d,h),r.width=a.width,r.height=Math.max(d,h)-r.y,l.push(r.y),s+=r.height):(r.x=Math.min(d,h),r.y=a.y,r.width=Math.max(d,h)-r.x,r.height=a.height,l.push(r.x),s+=r.width),r.color=f(r),a.dimensions.push(r)}"vertical"===c?(a.y=Math.min.apply(Math,l),a.height=s):(a.x=Math.min.apply(Math,l),a.width=s)})),i.push(a)})),i}),[e,o,r,d,u,c,s,h,f,v])}({data:W,stacked:I,dimensionIds:x,valueFormat:d,thicknessScale:F,dimensionsScale:L,colors:f,layout:l,outerPadding:s,innerPadding:h}),V=function(n,e,o){var t=r(),a=C(e,t);return i((function(){var i=[];return n.forEach((function(n){n.dimensions.forEach((function(e){i.push(G({key:n.id+"-"+e.id},e,{borderColor:a(e),borderWidth:o}))}))})),i}),[n,o,a])}(O,v,g);return{computedData:O,bars:V,thicknessScale:F,dimensionsScale:L,dimensionIds:x}},Y=function(i){var o,t=i.bar,r=i.animatedProps,a=i.isInteractive,d=i.tooltip,u=i.onClick,l=i.onMouseEnter,c=i.onMouseMove,s=i.onMouseLeave,h=E(),f=h.showTooltipFromEvent,v=h.hideTooltip,m=n((function(i){return f(e(d,{bar:t}),i)}),[f,d,t]),g=n((function(i){null==u||u(t,i)}),[u,t]),p=n((function(i){null==l||l(t,i),m(i)}),[m,t]),y=n((function(i){null==c||c(t,i),m(i)}),[m,t]),b=n((function(i){null==s||s(t,i),v()}),[s,t,v]);return F(P.rect,{x:r.x,y:r.y,width:I(r.width,(function(i){return Math.max(i,0)})),height:I(r.height,(function(i){return Math.max(i,0)})),fill:null!=(o=t.fill)?o:r.color,stroke:r.borderColor,strokeWidth:t.borderWidth,onClick:a?g:void 0,onMouseEnter:a?p:void 0,onMouseMove:a?y:void 0,onMouseLeave:a?b:void 0})},H=function(i){var n=i.bars,e=i.isInteractive,o=i.tooltip,t=i.onClick,r=i.onMouseEnter,d=i.onMouseMove,u=i.onMouseLeave,l=a(),c=l.animate,s=l.config,h=S(n,{keys:function(i){return i.key},initial:function(i){return{x:i.x,y:i.y,width:i.width,height:i.height,color:i.color,opacity:1,borderColor:i.borderColor}},from:function(i){return{x:i.x,y:i.y,width:i.width,height:i.height,color:i.color,opacity:0,borderColor:i.borderColor}},enter:function(i){return{x:i.x,y:i.y,width:i.width,height:i.height,color:i.color,opacity:1,borderColor:i.borderColor}},update:function(i){return{x:i.x,y:i.y,width:i.width,height:i.height,color:i.color,opacity:1,borderColor:i.borderColor}},leave:function(i){return{opacity:0,x:i.x,y:i.y,width:i.width,height:i.height,color:i.color}},config:s,immediate:!c});return F(L,{children:h((function(i,n){return F(Y,{bar:n,animatedProps:i,isInteractive:e,tooltip:o,onClick:t,onMouseEnter:r,onMouseMove:d,onMouseLeave:u},n.key)}))})},T=function(i){var n=i.bar;return F(W,{id:n.datum.id+" - "+n.id,value:n.formattedValue,enableChip:!0,color:n.color})},D=["isInteractive","animate","motionConfig"],B=function(n){var t=n.data,r=n.id,a=n.value,d=n.valueFormat,s=n.dimensions,m=n.width,g=n.height,p=n.margin,y=n.layout,b=void 0===y?O.layout:y,x=n.offset,M=void 0===x?O.offset:x,w=n.outerPadding,C=void 0===w?O.outerPadding:w,k=n.innerPadding,P=void 0===k?O.innerPadding:k,I=n.layers,S=void 0===I?O.layers:I,E=n.axisTop,W=n.axisRight,L=n.axisBottom,V=n.axisLeft,j=n.enableGridX,Y=void 0===j?O.enableGridX:j,D=n.gridXValues,B=n.enableGridY,R=void 0===B?O.enableGridY:B,q=n.gridYValues,z=n.colors,A=void 0===z?O.colors:z,J=n.defs,K=void 0===J?[]:J,N=n.fill,Q=void 0===N?[]:N,U=n.borderWidth,Z=void 0===U?O.borderWidth:U,$=n.borderColor,_=void 0===$?O.borderColor:$,ii=n.isInteractive,ni=void 0===ii?O.isInteractive:ii,ei=n.tooltip,oi=void 0===ei?T:ei,ti=n.onClick,ri=n.onMouseEnter,ai=n.onMouseMove,di=n.onMouseLeave,ui=n.legends,li=void 0===ui?[]:ui,ci=n.role,si=u(m,g,p),hi=si.outerWidth,fi=si.outerHeight,vi=si.margin,mi=si.innerWidth,gi=si.innerHeight,pi=X({data:t,id:r,value:a,dimensions:s,valueFormat:d,layout:b,offset:M,outerPadding:C,innerPadding:P,colors:A,borderColor:_,borderWidth:Z,width:mi,height:gi}),yi=pi.computedData,bi=pi.bars,xi=pi.thicknessScale,Mi=pi.dimensionsScale,wi=pi.dimensionIds,Ci={grid:null,axes:null,bars:null,legends:null},ki=l(K,bi,Q);S.includes("bars")&&(Ci.bars=F(H,{bars:bi,isInteractive:ni,tooltip:oi,onClick:ti,onMouseEnter:ri,onMouseMove:ai,onMouseLeave:di},"bars"));var Pi="vertical"===b?xi:Mi,Ii="vertical"===b?Mi:xi;S.includes("grid")&&(Ci.grid=F(h,{xScale:Y?Pi:void 0,yScale:R?Ii:void 0,width:mi,height:gi,xValues:D,yValues:q},"grid")),S.includes("axes")&&(Ci.axes=F(f,{xScale:Pi,yScale:Ii,width:mi,height:gi,top:E,right:W,bottom:L,left:V},"axes"));var Si=function(i,n){var e=[];return i.forEach((function(i){var o=n.find((function(n){return n.id===i}));o&&e.push({id:i,label:i,color:o.color,fill:o.fill})})),e}(wi,bi);S.includes("legends")&&(Ci.legends=F("g",{children:li.map((function(i,n){return F(v,G({},i,{containerWidth:mi,containerHeight:gi,data:Si}),n)}))},"legends"));var Ei=function(n){var e=n.data,o=n.bars,t=n.thicknessScale,r=n.dimensionsScale;return i((function(){return{data:e,bars:o,thicknessScale:t,dimensionsScale:r}}),[e,o,t,r])}({data:yi,bars:bi,thicknessScale:xi,dimensionsScale:Mi});return F(c,{width:hi,height:fi,margin:vi,defs:ki,role:ci,children:S.map((function(i,n){return void 0!==Ci[i]?Ci[i]:"function"==typeof i?F(o,{children:e(i,Ei)},n):null}))})},R=function(i){var n=i.isInteractive,e=void 0===n?O.isInteractive:n,o=i.animate,t=void 0===o?O.animate:o,r=i.motionConfig,a=void 0===r?O.motionConfig:r,u=function(i,n){if(null==i)return{};var e,o,t={},r=Object.keys(i);for(o=0;o<r.length;o++)e=r[o],n.indexOf(e)>=0||(t[e]=i[e]);return t}(i,D);return F(d,{theme:u.theme,isInteractive:e,animate:t,motionConfig:a,children:F(B,G({isInteractive:e,animate:t,motionConfig:a},u))})},q=function(i){return F(s,{children:function(n){var e=n.width,o=n.height;return F(R,G({width:e,height:o},i))}})};export{R as Marimekko,q as ResponsiveMarimekko,O as defaultProps,V as offsetById};
//# sourceMappingURL=nivo-marimekko.es.js.map
